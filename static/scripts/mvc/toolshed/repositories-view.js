define("mvc/toolshed/repositories-view",["exports","backbone","underscore","mvc/toolshed/toolshed-model","mvc/toolshed/util","libs/jquery/jquery-ui"],function(e,t,o,i,s){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t}Object.defineProperty(e,"__esModule",{value:!0});var a=l(t),d=l(o),n=r(i),h=r(s),c=a.View.extend({el:"#center",initialize:function(e){this.model=new n.default.CategoryCollection,this.listenTo(this.model,"sync",this.render);var t=e.tool_shed.replace(/\//g,"%2f");this.model.url+="?tool_shed_url="+t+"&category_id="+e.category_id,this.model.tool_shed=t,this.model.category=e.category_id,this.model.fetch()},render:function(e){this.options=d.extend(this.options,e);var t=this.templateCategoryContents;this.$el.html(t({category:this.model.models[0],tool_shed:this.model.tool_shed,queue:h.default.queueLength()})),$("#center").css("overflow","auto"),this.bindEvents()},bindEvents:function(){var e=this;$("#search_box").autocomplete({source:function(t,o){var i=e.model.tool_shed.replace(/%2f/g,"/"),s=Galaxy.root+"api/tool_shed/search",r={term:t.term,tool_shed_url:i};$.post(s,r,function(e){var t=h.default.shedParser(e);o(t)})},minLength:3,select:function(e,t){var o=t.item.value,i="repository/s/"+this.model.tool_shed+"/r/"+o;a.history.navigate(i,{trigger:!0,replace:!0})}})},templateCategoryContents:d.template(['<style type="text/css">',".ui-autocomplete { background-color: #fff; }","li.ui-menu-item { list-style-type: none; }","</style>",'<div class="unified-panel-header" id="panel_header" unselectable="on">','<div class="unified-panel-header-inner">Repositories in <%= category.get("name") %><a class="ml-auto" href="#/queue">Repository Queue (<%= queue %>)</a></div>',"</div>",'<div class="unified-panel-body" id="list_repositories">','<div id="standard-search" style="height: 2em; margin: 1em;">','<span class="ui-widget" >','<input class="search-box-input" id="search_box" name="search" data-shedurl="<%= tool_shed.replace(/%2f/g, "/") %>" placeholder="Search repositories by name or id" size="60" type="text" />',"</span>","</div>",'<div style="clear: both; margin-top: 1em;">','<table class="grid">','<thead id="grid-table-header">',"<tr>",'<th style="width: 10%;">Owner</th>','<th style="width: 15%;">Name</th>',"<th>Synopsis</th>",'<th style="width: 10%;">Type</th>',"</tr>","</thead>",'<% _.each(category.get("repositories"), function(repository) { %>',"<tr>","<td><%= repository.owner %></td>","<td>",'<div style="float: left; margin-left: 1px;" class="menubutton split">','<a href="#/repository/s/<%= tool_shed %>/r/<%= repository.id %>"><%= repository.name %></a>',"</div>","</td>","<td><%= repository.description %></td>","<td><%= repository.type %></td>","</tr>","<% }); %>","</table>","</div>","</div>"].join(""))});e.default={Category:c}});