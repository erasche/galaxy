{"version":3,"sources":["mvc/library/library-libraryrow-view.js"],"names":["LibraryRowView","Backbone","View","extend","events","edit_mode","element_visibility_config","upload_library_btn","edit_library_btn","permission_library_btn","save_library_btn","cancel_library_btn","delete_library_btn","undelete_library_btn","initialize","library","render","Galaxy","libraries","libraryListView","collection","get","$el","data","console","log","prepareButtons","tmpl","templateRow","setElement","button_config","show","repaint","find","tooltip","old_element","replaceWith","trigger","vis_config","edit_button_clicked","cancel_library_modification","save_library_modification","is_changed","new_name","val","length","set","warning","new_description","new_synopsis","row_view","save","patch","success","error","model","response","responseJSON","err_msg","info","delete_library","destroy","add","preferences","$","hide","remove","undelete_library","url","urlRoot","id","_","template","join"],"mappings":"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","file":"../../../scripts/mvc/library/library-libraryrow-view.js","sourcesContent":["// dependencies\nimport mod_toastr from \"libs/toastr\";\n// galaxy library row view\nvar LibraryRowView = Backbone.View.extend({\n    events: {\n        \"click .edit_library_btn\": \"edit_button_clicked\",\n        \"click .cancel_library_btn\": \"cancel_library_modification\",\n        \"click .save_library_btn\": \"save_library_modification\",\n        \"click .delete_library_btn\": \"delete_library\",\n        \"click .undelete_library_btn\": \"undelete_library\"\n    },\n\n    edit_mode: false,\n\n    element_visibility_config: {\n        upload_library_btn: false,\n        edit_library_btn: false,\n        permission_library_btn: false,\n        save_library_btn: false,\n        cancel_library_btn: false,\n        delete_library_btn: false,\n        undelete_library_btn: false\n    },\n\n    initialize: function(library) {\n        this.render(library);\n    },\n\n    render: function(library) {\n        if (typeof library === \"undefined\") {\n            library = Galaxy.libraries.libraryListView.collection.get(this.$el.data(\"id\"));\n            console.log(library);\n        }\n        this.prepareButtons(library);\n        var tmpl = this.templateRow();\n        this.setElement(\n            tmpl({\n                library: library,\n                button_config: this.element_visibility_config,\n                edit_mode: this.edit_mode\n            })\n        );\n        this.$el.show();\n        return this;\n    },\n\n    repaint: function(library) {\n        /* need to dispose manually because of the element removal in setElement\n    invoked in render() */\n        this.$el.find('[data-toggle=\"tooltip\"]').tooltip(\"dispose\");\n        /* we need to store the old element to be able to replace it with\n    new one */\n        var old_element = this.$el;\n        /* if user canceled the library param is undefined,\n      if user saved and succeeded the updated library is rendered */\n        this.render();\n        old_element.replaceWith(this.$el);\n        /* now we attach new tooltips to the newly created row element */\n        this.$el.find('[data-toggle=\"tooltip\"]').tooltip({ trigger: \"hover\" });\n    },\n\n    /**\n     * Function modifies the visibility of buttons for\n     * the filling of the row template of given library.\n     */\n    prepareButtons: function(library) {\n        var vis_config = this.element_visibility_config;\n\n        if (this.edit_mode === false) {\n            vis_config.save_library_btn = false;\n            vis_config.cancel_library_btn = false;\n            vis_config.delete_library_btn = false;\n            if (library.get(\"deleted\") === true) {\n                vis_config.undelete_library_btn = true;\n                vis_config.upload_library_btn = false;\n                vis_config.edit_library_btn = false;\n                vis_config.permission_library_btn = false;\n            } else if (library.get(\"deleted\") === false) {\n                vis_config.save_library_btn = false;\n                vis_config.cancel_library_btn = false;\n                vis_config.undelete_library_btn = false;\n                if (library.get(\"can_user_add\") === true) {\n                    vis_config.upload_library_btn = true;\n                }\n                if (library.get(\"can_user_modify\") === true) {\n                    vis_config.edit_library_btn = true;\n                }\n                if (library.get(\"can_user_manage\") === true) {\n                    vis_config.permission_library_btn = true;\n                }\n            }\n        } else if (this.edit_mode === true) {\n            vis_config.upload_library_btn = false;\n            vis_config.edit_library_btn = false;\n            vis_config.permission_library_btn = false;\n            vis_config.save_library_btn = true;\n            vis_config.cancel_library_btn = true;\n            vis_config.delete_library_btn = true;\n            vis_config.undelete_library_btn = false;\n        }\n\n        this.element_visibility_config = vis_config;\n    },\n\n    /* User clicked the 'edit' button on row so we render a new row\n    that allows editing */\n    edit_button_clicked: function() {\n        this.edit_mode = true;\n        this.repaint();\n    },\n\n    /* User clicked the 'cancel' button so we render normal rowView */\n    cancel_library_modification: function() {\n        // mod_toastr.info('Modifications canceled');\n        this.edit_mode = false;\n        this.repaint();\n    },\n\n    save_library_modification: function() {\n        var library = Galaxy.libraries.libraryListView.collection.get(this.$el.data(\"id\"));\n        var is_changed = false;\n\n        var new_name = this.$el.find(\".input_library_name\").val();\n        if (typeof new_name !== \"undefined\" && new_name !== library.get(\"name\")) {\n            if (new_name.length > 2) {\n                library.set(\"name\", new_name);\n                is_changed = true;\n            } else {\n                mod_toastr.warning(\"Library name has to be at least 3 characters long.\");\n                return;\n            }\n        }\n\n        var new_description = this.$el.find(\".input_library_description\").val();\n        if (typeof new_description !== \"undefined\" && new_description !== library.get(\"description\")) {\n            library.set(\"description\", new_description);\n            is_changed = true;\n        }\n\n        var new_synopsis = this.$el.find(\".input_library_synopsis\").val();\n        if (typeof new_synopsis !== \"undefined\" && new_synopsis !== library.get(\"synopsis\")) {\n            library.set(\"synopsis\", new_synopsis);\n            is_changed = true;\n        }\n\n        if (is_changed) {\n            var row_view = this;\n            library.save(null, {\n                patch: true,\n                success: function(library) {\n                    row_view.edit_mode = false;\n                    row_view.repaint(library);\n                    mod_toastr.success(\"Changes to library saved.\");\n                },\n                error: function(model, response) {\n                    if (typeof response.responseJSON !== \"undefined\") {\n                        mod_toastr.error(response.responseJSON.err_msg);\n                    } else {\n                        mod_toastr.error(\"An error occured while attempting to update the library.\");\n                    }\n                }\n            });\n        } else {\n            this.edit_mode = false;\n            this.repaint(library);\n            mod_toastr.info(\"Nothing has changed.\");\n        }\n    },\n\n    delete_library: function() {\n        var library = Galaxy.libraries.libraryListView.collection.get(this.$el.data(\"id\"));\n        var row_view = this;\n        // mark the library deleted\n        library.destroy({\n            success: function(library) {\n                library.set(\"deleted\", true);\n                // add the new deleted library back to the collection (Galaxy specialty)\n                Galaxy.libraries.libraryListView.collection.add(library);\n                row_view.edit_mode = false;\n                if (Galaxy.libraries.preferences.get(\"with_deleted\") === false) {\n                    $(\".tooltip\").hide();\n                    row_view.repaint(library);\n                    row_view.$el.remove();\n                } else if (Galaxy.libraries.preferences.get(\"with_deleted\") === true) {\n                    row_view.repaint(library);\n                }\n                mod_toastr.success(\"Library has been marked deleted.\");\n            },\n            error: function(model, response) {\n                if (typeof response.responseJSON !== \"undefined\") {\n                    mod_toastr.error(response.responseJSON.err_msg);\n                } else {\n                    mod_toastr.error(\"An error occured during deleting the library.\");\n                }\n            }\n        });\n    },\n\n    undelete_library: function() {\n        var library = Galaxy.libraries.libraryListView.collection.get(this.$el.data(\"id\"));\n        var row_view = this;\n\n        // mark the library undeleted\n        library.url = `${library.urlRoot + library.id}?undelete=true`;\n        library.destroy({\n            success: function(library) {\n                // add the newly undeleted library back to the collection\n                // backbone does not accept changes through destroy, so update it too\n                library.set(\"deleted\", false);\n                Galaxy.libraries.libraryListView.collection.add(library);\n                row_view.edit_mode = false;\n                row_view.repaint(library);\n                mod_toastr.success(\"Library has been undeleted.\");\n            },\n            error: function(model, response) {\n                if (typeof response.responseJSON !== \"undefined\") {\n                    mod_toastr.error(response.responseJSON.err_msg);\n                } else {\n                    mod_toastr.error(\"An error occured while undeleting the library.\");\n                }\n            }\n        });\n    },\n\n    templateRow: function() {\n        return _.template(\n            [\n                '<tr class=\"<% if(library.get(\"deleted\") === true) { print(\"active\") } %>\" style=\"display:none;\" data-id=\"<%- library.get(\"id\") %>\">',\n                \"<% if(!edit_mode) { %>\",\n                '<% if(library.get(\"deleted\")) { %>',\n                '<td style=\"color:grey;\"><%- library.get(\"name\") %></td>',\n                \"<% } else { %>\",\n                '<td><a href=\"#folders/<%- library.get(\"root_folder_id\") %>\"><%- library.get(\"name\") %></a></td>',\n                \"<% } %>\",\n                '<% if(library.get(\"description\")) { %>',\n                '<% if( (library.get(\"description\")).length> 80 ) { %>',\n                '<td data-toggle=\"tooltip\" data-placement=\"bottom\" title=\"<%= _.escape(library.get(\"description\")) %>\"><%= _.escape(library.get(\"description\")).substring(0, 80) + \"...\" %></td>',\n                \"<% } else { %>\",\n                '<td><%= _.escape(library.get(\"description\"))%></td>',\n                \"<% } %>\",\n                \"<% } else { %>\",\n                \"<td></td>\",\n                \"<% } %>\",\n                '<% if(library.get(\"synopsis\")) { %>',\n                '<% if( (library.get(\"synopsis\")).length> 120 ) { %>',\n                '<td data-toggle=\"tooltip\" data-placement=\"bottom\" title=\"<%= _.escape(library.get(\"synopsis\")) %>\"><%= _.escape(library.get(\"synopsis\")).substring(0, 120) + \"...\" %></td>',\n                \"<% } else { %>\",\n                '<td><%= _.escape(library.get(\"synopsis\"))%></td>',\n                \"<% } %>\",\n                \"<% } else { %>\",\n                \"<td></td>\",\n                \"<% } %>\",\n                \"<% } else if(edit_mode){ %>\",\n                '<td><textarea rows=\"4\" class=\"form-control input_library_name\" placeholder=\"name\" ><%- library.get(\"name\") %></textarea></td>',\n                '<td><textarea rows=\"4\" class=\"form-control input_library_description\" placeholder=\"description\" ><%- library.get(\"description\") %></textarea></td>',\n                '<td><textarea rows=\"4\" class=\"form-control input_library_synopsis\" placeholder=\"synopsis\" ><%- library.get(\"synopsis\") %></textarea></td>',\n                \"<% } %>\",\n                '<td class=\"right-center\">',\n                '<% if( (library.get(\"public\")) && (library.get(\"deleted\") === false) ) { %>',\n                '<span data-toggle=\"tooltip\" data-placement=\"left\" title=\"Unrestricted library\" style=\"color:grey;\" class=\"fa fa-globe fa-lg\"> </span>',\n                \"<% }%>\",\n                '<button data-toggle=\"tooltip\" data-placement=\"left\" title=\"Modify \\'<%- library.get(\"name\") %>\\'\" class=\"btn btn-sm edit_library_btn\" type=\"button\" style=\"<% if(button_config.edit_library_btn === false) { print(\"display:none;\") } %>\"><span class=\"fa fa-pencil\"></span> Edit</button>',\n                '<a data-toggle=\"tooltip\" data-placement=\"left\" title=\"Permissions of \\'<%- library.get(\"name\") %>\\'\" href=\"#library/<%- library.get(\"id\") %>/permissions\"><button class=\"btn btn-sm permission_library_btn\" type=\"button\" style=\"<% if(button_config.permission_library_btn === false) { print(\"display:none;\") } %>\"><span class=\"fa fa-group\"></span> Manage</button></a>',\n                '<button data-toggle=\"tooltip\" data-placement=\"left\" title=\"Save changes\" class=\"btn btn-sm save_library_btn\" type=\"button\" style=\"<% if(button_config.save_library_btn === false) { print(\"display:none;\") } %>\"><span class=\"fa fa-floppy-o\"></span> Save</button>',\n                '<button data-toggle=\"tooltip\" data-placement=\"left\" title=\"Discard changes\" class=\"btn btn-sm cancel_library_btn\" type=\"button\" style=\"<% if(button_config.cancel_library_btn === false) { print(\"display:none;\") } %>\"><span class=\"fa fa-times\"></span> Cancel</button>',\n                '<button data-toggle=\"tooltip\" data-placement=\"left\" title=\"Delete \\'<%- library.get(\"name\") %>\\'\" class=\"btn btn-sm delete_library_btn\" type=\"button\" style=\"<% if(button_config.delete_library_btn === false) { print(\"display:none;\") } %>\"><span class=\"fa fa-trash-o\"></span> Delete</button>',\n                // For deleted libraries\n                '<span data-toggle=\"tooltip\" data-placement=\"left\" title=\"Marked deleted\" style=\"color:grey; <% if(button_config.undelete_library_btn === false) { print(\"display:none;\") } %>\" class=\"fa fa-ban fa-lg\"></span>',\n                '<button data-toggle=\"tooltip\" data-placement=\"left\" title=\"Undelete \\'<%- library.get(\"name\") %>\\' \" class=\"btn btn-sm undelete_library_btn\" type=\"button\" style=\"<% if(button_config.undelete_library_btn === false) { print(\"display:none;\") } %>\"><span class=\"fa fa-unlock\"></span> Undelete</button>',\n                \"</td>\",\n                \"</tr>\"\n            ].join(\"\")\n        );\n    }\n});\n\nexport default {\n    LibraryRowView: LibraryRowView\n};\n"]}