{"version":3,"sources":["mvc/grid/grid-template.js"],"names":["_","grid","options","tmpl","embedded","grid_header","grid_table","info_text","id_str","title_id","title","global_actions","show_popup","length","action","target","url_args","label","insert","grid_filters","header","show_item_checkboxes","items","columns","column","visible","key","sortable","extra","body","items_length","item","current_item_id","id","encode_id","nowrap","column_settings","column_config","link","value","$","type","replace","popup_id","attach_popup","delayed","footer","use_paging","num_pages","num_page_links","cur_page_num","page_link_range","min_page","min_offset","max_range","max_page","max_offset","page_index","operations","operation","allow_multiple","found_global","global_operation","legend","message","status","indexOf","escape","default_filter_dict","filters","advanced_search_display","advanced_search","show_advanced_search_link","filterable","column_key","f_key","d_key","standard_search_display","grid_column_filter","column_label","toLowerCase","is_text","url","filter_value","JSON","stringify","column_filter","filter_element","i","params","slice","size","seperator","cf_label","categorical_filters","cf","cf_key","cf_arg","filter","filter_key","sanitize"],"mappings":";;;;;;;;;QAEYA,C;;;;;;;;;;;;;;;;;;;;;;;;;sBAKG;AACX;AACAC,cAAM,cAASC,OAAT,EAAkB;AACpB,gBAAIC,aAAJ;AACA,gBAAID,QAAQE,QAAZ,EAAsB;AAClBD,uBAAO,KAAKE,WAAL,CAAiBH,OAAjB,IAA4B,KAAKI,UAAL,CAAgBJ,OAAhB,CAAnC;AACH,aAFD,MAEO;AACHC,2MAI8B,KAAKE,WAAL,CAAiBH,OAAjB,CAJ9B,0WAcM,KAAKI,UAAL,CAAgBJ,OAAhB,CAdN;AAgBH;;AAED;AACA,gBAAIA,QAAQK,SAAZ,EAAuB;AACnBJ,qFAA+DD,QAAQK,SAAvE;AACH;;AAED;AACA,mBAAOJ,IAAP;AACH,SAhCU;;AAkCX;AACAG,oBAAY,sBAAW;AACnB;AAQH,SA5CU;;AA8CX;AACAD,qBAAa,qBAASH,OAAT,EAAkB;AAC3B,gBAAIC,OAAO,2BAAX;AACA,gBAAI,CAACD,QAAQE,QAAb,EAAuB;AACnB,oBAAII,SAAS,EAAb;AACA,oBAAIN,QAAQO,QAAZ,EAAsB;AAClBD,yCAAkBN,QAAQO,QAA1B;AACH;AACDN,gCAAcK,MAAd,SAAwBN,QAAQQ,KAAhC;AACH;AACD,gBAAIR,QAAQS,cAAZ,EAA4B;AACxBR,wBAAQ,mCAAR;AACA,oBAAIS,aAAaV,QAAQS,cAAR,CAAuBE,MAAvB,IAAiC,CAAlD;AACA,oBAAID,UAAJ,EAAgB;AACZT,4BACI,+FACA,wCAFJ;AAGH;AAPuB;AAAA;AAAA;;AAAA;AAQxB,yCAAmBD,QAAQS,cAA3B,8HAA2C;AAAA,4BAAlCG,MAAkC;;AACvCX,wFAA2DW,OAAOC,MAAlE,kBACID,OAAOE,QADX,sCAE8BF,OAAOG,KAFrC;AAGH;AAZuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAaxB,oBAAIL,UAAJ,EAAgB;AACZT,4BAAQ,QAAR;AACH;AACDA,wBAAQ,OAAR;AACH;AACD,gBAAID,QAAQgB,MAAZ,EAAoB;AAChBf,wBAAQD,QAAQgB,MAAhB;AACH;;AAED;AACAf,oBAAQ,KAAKgB,YAAL,CAAkBjB,OAAlB,CAAR;AACAC,oBAAQ,QAAR;;AAEA;AACA,mBAAOA,IAAP;AACH,SApFU;;AAsFX;AACAiB,gBAAQ,gBAASlB,OAAT,EAAkB;AACtB;AACA,gBAAIC,OAAO,MAAX;;AAEA;AACA,gBAAID,QAAQmB,oBAAZ,EAAkC;AAC9BlB,wBAAQ,MAAR;AACA,oBAAID,QAAQoB,KAAR,CAAcT,MAAd,GAAuB,CAA3B,EAA8B;AAC1BV,4BACI,iFACA,6DAFJ;AAGH;AACDA,wBAAQ,OAAR;AACH;;AAED;AAfsB;AAAA;AAAA;;AAAA;AAgBtB,sCAAmBD,QAAQqB,OAA3B,mIAAoC;AAAA,wBAA3BC,MAA2B;;AAChC,wBAAIA,OAAOC,OAAX,EAAoB;AAChBtB,8CAAmBqB,OAAOE,GAA1B;AACA,4BAAIF,OAAOG,QAAX,EAAqB;AACjBxB,uGAAoEqB,OAAOE,GAA3E,WACIF,OAAOP,KADX;AAGH,yBAJD,MAIO;AACHd,oCAAQqB,OAAOP,KAAf;AACH;AACDd,gEAAoCqB,OAAOI,KAA3C;AACH;AACJ;;AAED;AA9BsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AA+BtBzB,oBAAQ,OAAR;;AAEA;AACA,mBAAOA,IAAP;AACH,SA1HU;;AA4HX;AACA0B,cAAM,cAAS3B,OAAT,EAAkB;AACpB;AACA,gBAAIC,OAAO,EAAX;AACA,gBAAI2B,eAAe5B,QAAQoB,KAAR,CAAcT,MAAjC;;AAEA;AACA,gBAAIiB,iBAAiB,CAArB,EAAwB;AACpB;AACA3B,wBAAQ,mDAAR;AACH;;AAED;AAXoB;AAAA;AAAA;;AAAA;AAYpB,sCAAiBD,QAAQoB,KAAzB,mIAAgC;AAAA,wBAAvBS,IAAuB;;AAC5B;AACA5B,4BAAQ,MAAR;AACA,wBAAID,QAAQ8B,eAAR,IAA2BD,KAAKE,EAApC,EAAwC;AACpC9B,gCAAQ,iBAAR;AACH;AACDA,4BAAQ,GAAR;;AAEA;AACA,wBAAID,QAAQmB,oBAAZ,EAAkC;AAC9BlB,8GAA6E4B,KAAKG,SAAlF,gBACIH,KAAKG,SADT;AAGH;;AAED;AAf4B;AAAA;AAAA;;AAAA;AAgB5B,8CAAmBhC,QAAQqB,OAA3B,mIAAoC;AAAA,gCAA3BC,MAA2B;;AAChC,gCAAIA,OAAOC,OAAX,EAAoB;AAChB;AACA,oCAAIU,SAAS,EAAb;AACA,oCAAIX,OAAOW,MAAX,EAAmB;AACfA,6CAAS,6BAAT;AACH;;AAED;AACA,oCAAIC,kBAAkBL,KAAKM,aAAL,CAAmBb,OAAOP,KAA1B,CAAtB;;AAEA;AACA,oCAAIqB,OAAOF,gBAAgBE,IAA3B;AACA,oCAAIC,QAAQH,gBAAgBG,KAA5B;AACA,oCAAIxB,SAASqB,gBAAgBrB,MAA7B;;AAEA;AACA,oCAAIyB,EAAEC,IAAF,CAAOF,KAAP,MAAkB,QAAtB,EAAgC;AAC5BA,4CAAQA,MAAMG,OAAN,CAAc,OAAd,EAAuB,GAAvB,CAAR;AACH;;AAED;AACA,oCAAIC,WAAW,EAAf;AACA,oCAAInB,OAAOoB,YAAX,EAAyB;AACrBD,yDAAmBZ,KAAKG,SAAxB;AACH;;AAED;AACA/B,iDAAegC,MAAf;;AAEA;AACA,oCAAIX,OAAOqB,OAAX,EAAoB;AAChB1C,4EAAqCqB,OAAOE,GAA5C,qBACIK,KAAKG,SADT,wBAEiBK,KAFjB;AAGH,iCAJD,MAIO,IAAIf,OAAOoB,YAAP,IAAuBN,IAA3B,EAAiC;AACpCnC,wKACmEY,MADnE,kBACoFuB,IADpF,qCACqHC,KADrH,oEAE0BI,QAF1B;AAIH,iCALM,MAKA,IAAInB,OAAOoB,YAAX,EAAyB;AAC5BzC,8DAAuBwC,QAAvB,kEAAuFJ,KAAvF;AACH,iCAFM,MAEA,IAAID,IAAJ,EAAU;AACbnC,kFAAyCY,MAAzC,kBAA0DuB,IAA1D,qCAA2FC,KAA3F;AACH,iCAFM,MAEA;AACHpC,yDAAkBoC,SAAS,EAA3B;AACH;AACDpC,wCAAQ,OAAR;AACH;AACJ;AAjE2B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAkE5BA,4BAAQ,OAAR;AACH;AA/EmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAgFpB,mBAAOA,IAAP;AACH,SA9MU;;AAgNX;AACA2C,gBAAQ,gBAAS5C,OAAT,EAAkB;AACtB;AACA,gBAAIC,OAAO,EAAX;;AAEA;AACA,gBAAID,QAAQ6C,UAAR,IAAsB7C,QAAQ8C,SAAR,GAAoB,CAA9C,EAAiD;AAC7C;AACA,oBAAIC,iBAAiB/C,QAAQ+C,cAA7B;AACA,oBAAIC,eAAehD,QAAQgD,YAA3B;AACA,oBAAIF,YAAY9C,QAAQ8C,SAAxB;;AAEA;AACA,oBAAIG,kBAAkBF,iBAAiB,CAAvC;AACA,oBAAIG,WAAWF,eAAeC,eAA9B;AACA,oBAAIE,aAAa,CAAjB;AACA,oBAAID,YAAY,CAAhB,EAAmB;AACf;AACAA,+BAAW,CAAX;AACAC,iCAAaF,mBAAmBD,eAAeE,QAAlC,CAAb;AACH;;AAED;AACA,oBAAIE,YAAYH,kBAAkBE,UAAlC;AACA,oBAAIE,WAAWL,eAAeI,SAA9B;AACA,oBAAIE,UAAJ;AACA,oBAAID,YAAYP,SAAhB,EAA2B;AACvB;AACAQ,iCAAa,CAAb;AACH,iBAHD,MAGO;AACH;AACAD,+BAAWP,SAAX;AACA;AACAQ,iCAAaF,aAAaC,WAAW,CAAX,GAAeL,YAA5B,CAAb;AACH;;AAED;AACA;AACA,oBAAIM,eAAe,CAAnB,EAAsB;AAClBJ,gCAAYI,UAAZ;AACA,wBAAIJ,WAAW,CAAf,EAAkB;AACdA,mCAAW,CAAX;AACH;AACJ;;AAED;AACAjD,wBAAQ,0BAAR;AACA,oBAAID,QAAQmB,oBAAZ,EAAkC;AAC9BlB,4BAAQ,WAAR;AACH;AACDA,wBAAQ,uBAAuB,iCAAvB,GAA2D,OAAnE;;AAEA,oBAAIiD,WAAW,CAAf,EAAkB;AACdjD,4BACI,mIADJ;AAEH;;AAED;AACA,qBAAK,IAAIsD,aAAaL,QAAtB,EAAgCK,aAAaF,WAAW,CAAxD,EAA2DE,YAA3D,EAAyE;AACrE,wBAAIA,cAAcvD,QAAQgD,YAA1B,EAAwC;AACpC/C,iGAAoEsD,UAApE,WAAmFA,UAAnF;AACH,qBAFD,MAEO;AACHtD,mFAAsDsD,UAAtD,gFAAqIA,UAArI,WAAoJA,UAApJ;AACH;AACJ;;AAED;AACA,oBAAIF,WAAWP,SAAf,EAA0B;AACtB7C,kFAAyD6C,SAAzD,gFAAuIA,SAAvI,WAAqJA,SAArJ;AACH;AACD7C,wBAAQ,SAAR;;AAEA;AACAA;AAIH;;AAED;AACA,gBAAID,QAAQmB,oBAAZ,EAAkC;AAC9B;AACAlB;;AAQA;AAV8B;AAAA;AAAA;;AAAA;AAW9B,0CAAsBD,QAAQwD,UAA9B,mIAA0C;AAAA,4BAAjCC,SAAiC;;AACtC,4BAAIA,UAAUC,cAAd,EAA8B;AAC1BzD,wEACIwD,UAAU1C,KADd;AAGH;AACJ;;AAED;AAnB8B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAoB9Bd,wBAAQ,UAAU,OAAlB;AACH;;AAED;AACA,gBAAI0D,eAAe,KAAnB;AAvGsB;AAAA;AAAA;;AAAA;AAwGtB,sCAAsB3D,QAAQwD,UAA9B,mIAA0C;AAAA,wBAAjCC,UAAiC;;AACtC,wBAAIA,WAAUG,gBAAd,EAAgC;AAC5BD,uCAAe,IAAf;AACA;AACH;AACJ;;AAED;AA/GsB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAgHtB,gBAAIA,YAAJ,EAAkB;AACd1D,wBAAQ,SAAS,oBAAjB;AADc;AAAA;AAAA;;AAAA;AAEd,0CAAsBD,QAAQwD,UAA9B,mIAA0C;AAAA,4BAAjCC,WAAiC;;AACtC,4BAAIA,YAAUG,gBAAd,EAAgC;AAC5B3D,2EAA0CwD,YAAUG,gBAApD,WAAyEH,YAAU1C,KAAnF;AACH;AACJ;AANa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAOdd,wBAAQ,UAAU,OAAlB;AACH;;AAED;AACA,gBAAID,QAAQ6D,MAAZ,EAAoB;AAChB5D,qDAAiCD,QAAQ6D,MAAzC;AACH;;AAED;AACA,mBAAO5D,IAAP;AACH,SAlVU;;AAoVX;AACA6D,iBAAS,iBAAS9D,OAAT,EAAkB;AACvB,gBAAI+D,SAAS/D,QAAQ+D,MAArB;AACA,gBAAI,CAAC,SAAD,EAAY,IAAZ,EAAkBC,OAAlB,CAA0BD,MAA1B,KAAqC,CAAC,CAA1C,EAA6C;AACzCA,yBAAS,MAAT;AACH;AACD,wCAAyBA,MAAzB,oCAA6DjE,EAAEmE,MAAF,CACzDjE,QAAQ8D,OADiD,CAA7D;AAGH,SA7VU;;AA+VX;AACA7C,sBAAc,sBAASjB,OAAT,EAAkB;AAC5B;AACA,gBAAIkE,sBAAsBlE,QAAQkE,mBAAlC;AACA,gBAAIC,UAAUnE,QAAQmE,OAAtB;;AAEA;AACA,gBAAIC,0BAA0B,MAA9B;AACA,gBAAIpE,QAAQqE,eAAZ,EAA6B;AACzBD,0CAA0B,OAA1B;AACH;;AAED;AACA,gBAAIE,4BAA4B,KAAhC;AAZ4B;AAAA;AAAA;;AAAA;AAa5B,sCAAmBtE,QAAQqB,OAA3B,mIAAoC;AAAA,wBAA3BC,MAA2B;;AAChC,wBAAIA,OAAOiD,UAAP,IAAqB,UAAzB,EAAqC;AACjC,4BAAIC,aAAalD,OAAOE,GAAxB;AACA,4BAAIiD,QAAQN,QAAQK,UAAR,CAAZ;AACA,4BAAIE,QAAQR,oBAAoBM,UAApB,CAAZ;AACA,4BAAIC,SAASC,KAAT,IAAkBD,SAASC,KAA/B,EAAsC;AAClCN,sDAA0B,OAA1B;AACH;AACDE,oDAA4B,IAA5B;AACH;AACJ;;AAED;AAzB4B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AA0B5B,gBAAIK,0BAA0B,OAA9B;AACA,gBAAIP,2BAA2B,OAA/B,EAAwC;AACpCO,0CAA0B,MAA1B;AACH;;AAED;AACA;AACA;AACA,gBAAI1E,yDAAoD0E,uBAApD,qDAAJ;;AAEA;AApC4B;AAAA;AAAA;;AAAA;AAqC5B,sCAAmB3E,QAAQqB,OAA3B,mIAAoC;AAAA,wBAA3BC,OAA2B;;AAChC,wBAAIA,QAAOiD,UAAP,IAAqB,UAAzB,EAAqC;AACjCtE,gCAAQ,KAAK2E,kBAAL,CAAwB5E,OAAxB,EAAiCsB,OAAjC,CAAR;AACH;AACJ;;AAED;AA3C4B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AA4C5BrB,oBAAQ,aAAa,OAAb,GAAuB,OAAvB,GAAiC,MAAjC,GAA0C,MAAlD;;AAEA;AACA,gBAAIqE,yBAAJ,EAA+B;AAC3BrE,wBAAQ,+DAAR;AACH;;AAED;AACAA,oBAAQ,UAAU,OAAV,GAAoB,UAApB,GAAiC,QAAzC;;AAEA;AACA;AACA;AACAA,sEAAqDmE,uBAArD;;AAEA;AA3D4B;AAAA;AAAA;;AAAA;AA4D5B,uCAAmBpE,QAAQqB,OAA3B,wIAAoC;AAAA,wBAA3BC,QAA2B;;AAChC,wBAAIA,SAAOiD,UAAP,IAAqB,UAAzB,EAAqC;AACjCtE,gCAAQ,KAAK2E,kBAAL,CAAwB5E,OAAxB,EAAiCsB,QAAjC,CAAR;AACH;AACJ;;AAED;AAlE4B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAmE5BrB,oBAAQ,aAAa,QAArB;;AAEA;AACA,mBAAOA,IAAP;AACH,SAvaU;;AAyaX;AACA2E,4BAAoB,4BAAS5E,OAAT,EAAkBsB,MAAlB,EAA0B;AAC1C;AACA,gBAAI6C,UAAUnE,QAAQmE,OAAtB;AACA,gBAAIU,eAAevD,OAAOP,KAA1B;AACA,gBAAIyD,aAAalD,OAAOE,GAAxB;AACA,gBAAIF,OAAOiD,UAAP,IAAqB,UAAzB,EAAqC;AACjCM,+BAAeA,aAAaC,WAAb,EAAf;AACH;;AAED;AACA,gBAAI7E,OAAO,MAAX;;AAEA,gBAAIqB,OAAOiD,UAAP,IAAqB,UAAzB,EAAqC;AACjCtE,6EAAuD4E,YAAvD;AACH;AACD5E,oBAAQ,mCAAR;AACA,gBAAIqB,OAAOyD,OAAX,EAAoB;AAChB9E,2EAAsDuE,UAAtD,oBAA6ExE,QAAQgF,GAArF;AACA;AAFgB;AAAA;AAAA;;AAAA;AAGhB,2CAAmBhF,QAAQqB,OAA3B,wIAAoC;AAAA,4BAA3BC,QAA2B;;AAChC,4BAAI2D,eAAed,QAAQ7C,SAAOE,GAAf,CAAnB;AACA,4BAAIyD,YAAJ,EAAkB;AACd,gCAAIA,gBAAgB,KAApB,EAA2B;AACvB,oCAAI3D,SAAOyD,OAAX,EAAoB;AAChBE,mDAAeC,KAAKC,SAAL,CAAeF,YAAf,CAAf;AACH;AACDhF,yEAAoCqB,SAAOE,GAA3C,oBACIF,SAAOE,GADX,mBAEYyD,YAFZ;AAGH;AACJ;AACJ;AACD;AAhBgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAiBhBhF,wCAAqBuE,UAArB;;AAEA;AACA,oBAAIY,gBAAgBjB,QAAQK,UAAR,CAApB;AACA,oBAAIY,aAAJ,EAAmB;AACf;AACA,wBAAI7C,OAAOD,EAAEC,IAAF,CAAO6C,aAAP,CAAX;;AAEA;AACA,wBAAI7C,QAAQ,QAAZ,EAAsB;AAClB,4BAAI6C,iBAAiB,KAArB,EAA4B;AACxB;AACAnF,oCAAQ,KAAKoF,cAAL,CAAoBb,UAApB,EAAgCY,aAAhC,CAAR;AACH;AACJ;;AAED;AACA,wBAAI7C,QAAQ,OAAZ,EAAqB;AACjB,6BAAK,IAAI+C,CAAT,IAAcF,aAAd,EAA6B;AACzB;AACA,gCAAIG,SAASH,aAAb;AACAG,qCAASA,OAAOC,KAAP,CAAaF,CAAb,CAAT;;AAEA;AACArF,oCAAQ,KAAKoF,cAAL,CAAoBb,UAApB,EAAgCY,cAAcE,CAAd,CAAhC,CAAR;AACH;AACJ;AACJ;;AAED;AACArF,wBAAQ,SAAR;;AAEA;AACA,oBAAIoC,QAAQ,EAAZ;AACA,oBAAIoD,OAAO,EAAX;AACA,oBAAInE,OAAOiD,UAAP,IAAqB,UAAzB,EAAqC;AACjClC,4BAAQf,OAAOP,KAAP,CAAa+D,WAAb,EAAR;AACA,wBAAIzC,MAAM1B,MAAN,GAAe,EAAnB,EAAuB;AACnB8E,+BAAOpD,MAAM1B,MAAb;AACH;AACD;AACA8E,2BAAOA,OAAO,CAAd;AACH;;AAED;AACAxF,6IAEoDuE,UAFpD,2BAEkFA,UAFlF,uCAE0HnC,KAF1H,kBAE0IoD,IAF1I;AAQH,aAtED,MAsEO;AACH;AACAxF,wCAAqBuE,UAArB;;AAEA;AACA,oBAAIkB,YAAY,KAAhB;AACA,qBAAK,IAAIC,QAAT,IAAqB3F,QAAQ4F,mBAAR,CAA4BpB,UAA5B,CAArB,EAA8D;AAC1D;AACA,wBAAIqB,KAAK7F,QAAQ4F,mBAAR,CAA4BpB,UAA5B,EAAwCmB,QAAxC,CAAT;;AAEA;AACA,wBAAIG,SAAS,EAAb;AACA,wBAAIC,SAAS,EAAb;AACA,yBAAK,IAAIvE,GAAT,IAAgBqE,EAAhB,EAAoB;AAChBC,iCAAStE,GAAT;AACAuE,iCAASF,GAAGrE,GAAH,CAAT;AACH;;AAED;AACA,wBAAIkE,SAAJ,EAAe;AACXzF,gCAAQ,KAAR;AACH;AACDyF,gCAAY,IAAZ;;AAEA;AACA,wBAAIM,SAAS7B,QAAQK,UAAR,CAAb;AACA,wBAAIwB,UAAUH,GAAGrB,UAAH,CAAV,IAA4BwB,UAAUD,MAA1C,EAAkD;AAC9C9F,sEAA2CuE,UAA3C,iCAAgFmB,QAAhF;AACH,qBAFD,MAEO;AACH1F,sEAA2CuE,UAA3C,+DAA2GsB,MAA3G,wBAAkIC,MAAlI,WAA6IJ,QAA7I;AACH;AACJ;AACD1F,wBAAQ,SAAR;AACH;AACDA,oBAAQ,UAAU,OAAlB;;AAEA;AACA,mBAAOA,IAAP;AACH,SAtiBU;;AAwiBX;AACAoF,wBAAgB,wBAASY,UAAT,EAAqBhB,YAArB,EAAmC;AAC/CA,2BAAe,gBAAMiB,QAAN,CAAejB,YAAf,CAAf;AACA,wDAAwCA,YAAxC,qDAAiGgB,UAAjG,wBAA4HhB,YAA5H;AACH;AA5iBU,K","file":"../../../scripts/mvc/grid/grid-template.js","sourcesContent":["// dependencies\nimport Utils from \"utils/utils\";\nimport * as _ from \"underscore\";\n\n/* global $ */\n\n// grid view templates\nexport default {\n    // template\n    grid: function(options) {\n        let tmpl;\n        if (options.embedded) {\n            tmpl = this.grid_header(options) + this.grid_table(options);\n        } else {\n            tmpl = `\n                <div class=\"loading-elt-overlay\"></div>\n                <table class=\"grid-table\">\n                    <tr>\n                        <td width=\"75%\">${this.grid_header(options)}</td>\n                        <td></td>\n                        <td></td>\n                    </tr>\n                    <tr>\n                        <td width=\"100%\" id=\"grid-message\" valign=\"top\"></td>\n                        <td></td>\n                        <td></td>\n                    </tr>\n                </table>\n                ${this.grid_table(options)}\n            `;\n        }\n\n        // add info text\n        if (options.info_text) {\n            tmpl += `<br><div class=\"toolParamHelp\" style=\"clear: both;\">${options.info_text}</div>`;\n        }\n\n        // return\n        return tmpl;\n    },\n\n    // template\n    grid_table: function() {\n        return `\n            <form method=\"post\" onsubmit=\"return false;\">\n                <table id=\"grid-table\" class=\"grid\">\n                    <thead id=\"grid-table-header\"></thead>\n                    <tbody id=\"grid-table-body\"></tbody>\n                    <tfoot id=\"grid-table-footer\"></tfoot>\n                </table>\n            </form>`;\n    },\n\n    // template\n    grid_header: function(options) {\n        var tmpl = '<div class=\"grid-header\">';\n        if (!options.embedded) {\n            let id_str = \"\";\n            if (options.title_id) {\n                id_str += ` id=\"${options.title_id}\"`;\n            }\n            tmpl += `<h2${id_str}>${options.title}</h2>`;\n        }\n        if (options.global_actions) {\n            tmpl += '<ul class=\"manage-table-actions\">';\n            var show_popup = options.global_actions.length >= 3;\n            if (show_popup) {\n                tmpl +=\n                    '<li><a class=\"action-button\" id=\"popup-global-actions\" class=\"menubutton\">Actions</a></li>' +\n                    '<div popupmenu=\"popup-global-actions\">';\n            }\n            for (let action of options.global_actions) {\n                tmpl += `<li><a class=\"action-button use-target\" target=\"${action.target}\" href=\"${\n                    action.url_args\n                }\" onclick=\"return false;\" >${action.label}</a></li>`;\n            }\n            if (show_popup) {\n                tmpl += \"</div>\";\n            }\n            tmpl += \"</ul>\";\n        }\n        if (options.insert) {\n            tmpl += options.insert;\n        }\n\n        // add grid filters\n        tmpl += this.grid_filters(options);\n        tmpl += \"</div>\";\n\n        // return template\n        return tmpl;\n    },\n\n    // template\n    header: function(options) {\n        // start\n        var tmpl = \"<tr>\";\n\n        // add checkbox\n        if (options.show_item_checkboxes) {\n            tmpl += \"<th>\";\n            if (options.items.length > 0) {\n                tmpl +=\n                    '<input type=\"checkbox\" id=\"check_all\" name=select_all_checkbox value=\"true\">' +\n                    '<input type=\"hidden\" name=select_all_checkbox value=\"true\">';\n            }\n            tmpl += \"</th>\";\n        }\n\n        // create header elements\n        for (let column of options.columns) {\n            if (column.visible) {\n                tmpl += `<th id=\"${column.key}-header\">`;\n                if (column.sortable) {\n                    tmpl += `<a href=\"javascript:void(0)\" class=\"sort-link\" sort_key=\"${column.key}\">${\n                        column.label\n                    }</a>`;\n                } else {\n                    tmpl += column.label;\n                }\n                tmpl += `<span class=\"sort-arrow\">${column.extra}</span></th>`;\n            }\n        }\n\n        // finalize\n        tmpl += \"</tr>\";\n\n        // return template\n        return tmpl;\n    },\n\n    // template\n    body: function(options) {\n        // initialize\n        var tmpl = \"\";\n        var items_length = options.items.length;\n\n        // empty grid?\n        if (items_length === 0) {\n            // No results.\n            tmpl += '<tr><td colspan=\"100\"><em>No Items</em></td></tr>';\n        }\n\n        // create rows\n        for (let item of options.items) {\n            // Tag current\n            tmpl += \"<tr \";\n            if (options.current_item_id == item.id) {\n                tmpl += 'class=\"current\"';\n            }\n            tmpl += \">\";\n\n            // Item selection column\n            if (options.show_item_checkboxes) {\n                tmpl += `<td style=\"width: 1.5em;\"><input type=\"checkbox\" name=\"id\" value=\"${item.encode_id}\" id=\"${\n                    item.encode_id\n                }\" class=\"grid-row-select-checkbox\" /></td>`;\n            }\n\n            // Data columns\n            for (let column of options.columns) {\n                if (column.visible) {\n                    // Nowrap\n                    var nowrap = \"\";\n                    if (column.nowrap) {\n                        nowrap = 'style=\"white-space:nowrap;\"';\n                    }\n\n                    // get column settings\n                    var column_settings = item.column_config[column.label];\n\n                    // load attributes\n                    var link = column_settings.link;\n                    var value = column_settings.value;\n                    var target = column_settings.target;\n\n                    // unescape value\n                    if ($.type(value) === \"string\") {\n                        value = value.replace(/\\/\\//g, \"/\");\n                    }\n\n                    // Attach popup menu?\n                    var popup_id = \"\";\n                    if (column.attach_popup) {\n                        popup_id = `grid-${item.encode_id}-popup`;\n                    }\n\n                    // Check for row wrapping\n                    tmpl += `<td ${nowrap}>`;\n\n                    // Determine cell content\n                    if (column.delayed) {\n                        tmpl += `<div class=\"delayed-value-${column.key}\" data-id=\"${\n                            item.encode_id\n                        }\" data-value=\"${value}\"><span class=\"fa fa-spinner fa-spin\"></span></div>`;\n                    } else if (column.attach_popup && link) {\n                        tmpl += `<div class=\"btn-group\">\n                                    <button class=\"btn btn-secondary use-target\" target=\"${target}\" href=\"${link}\" onclick=\"return false;\">${value}</button>\n                                    <button id=\"${popup_id}\" class=\"btn btn-secondary dropdown-toggle dropdown-toggle-split\" data-toggle=\"dropdown\"/>\n                                </div>`;\n                    } else if (column.attach_popup) {\n                        tmpl += `<button id=\"${popup_id}\" class=\"btn dropdown-toggle\" data-toggle=\"dropdown\">${value}</button>`;\n                    } else if (link) {\n                        tmpl += `<a class=\"use-target\" target=\"${target}\" href=\"${link}\" onclick=\"return false;\">${value}</a>`;\n                    } else {\n                        tmpl += `<label>${value || \"\"}</label>`;\n                    }\n                    tmpl += \"</td>\";\n                }\n            }\n            tmpl += \"</tr>\";\n        }\n        return tmpl;\n    },\n\n    // template\n    footer: function(options) {\n        // create template string\n        var tmpl = \"\";\n\n        // paging\n        if (options.use_paging && options.num_pages > 1) {\n            // get configuration\n            var num_page_links = options.num_page_links;\n            var cur_page_num = options.cur_page_num;\n            var num_pages = options.num_pages;\n\n            // First pass on min page.\n            var page_link_range = num_page_links / 2;\n            var min_page = cur_page_num - page_link_range;\n            var min_offset = 0;\n            if (min_page <= 0) {\n                // Min page is too low.\n                min_page = 1;\n                min_offset = page_link_range - (cur_page_num - min_page);\n            }\n\n            // Set max page.\n            var max_range = page_link_range + min_offset;\n            var max_page = cur_page_num + max_range;\n            var max_offset;\n            if (max_page <= num_pages) {\n                // Max page is fine.\n                max_offset = 0;\n            } else {\n                // Max page is too high.\n                max_page = num_pages;\n                // +1 to account for the +1 in the loop below.\n                max_offset = max_range - (max_page + 1 - cur_page_num);\n            }\n\n            // Second and final pass on min page to add any unused\n            // offset from max to min.\n            if (max_offset !== 0) {\n                min_page -= max_offset;\n                if (min_page < 1) {\n                    min_page = 1;\n                }\n            }\n\n            // template header\n            tmpl += '<tr id=\"page-links-row\">';\n            if (options.show_item_checkboxes) {\n                tmpl += \"<td></td>\";\n            }\n            tmpl += '<td colspan=\"100\">' + '<span id=\"page-link-container\">' + \"Page:\";\n\n            if (min_page > 1) {\n                tmpl +=\n                    '<span class=\"page-link-grid\" id=\"page-link-1\"><a href=\"javascript:void(0);\" page_num=\"1\" onclick=\"return false;\">1</a></span> ...';\n            }\n\n            // create page urls\n            for (var page_index = min_page; page_index < max_page + 1; page_index++) {\n                if (page_index == options.cur_page_num) {\n                    tmpl += `<span class=\"page-link-grid inactive-link\" id=\"page-link-${page_index}\">${page_index}</span>`;\n                } else {\n                    tmpl += `<span class=\"page-link-grid\" id=\"page-link-${page_index}\"><a href=\"javascript:void(0);\" onclick=\"return false;\" page_num=\"${page_index}\">${page_index}</a></span>`;\n                }\n            }\n\n            // show last page\n            if (max_page < num_pages) {\n                tmpl += `...<span class=\"page-link-grid\" id=\"page-link-${num_pages}\"><a href=\"javascript:void(0);\" onclick=\"return false;\" page_num=\"${num_pages}\">${num_pages}</a></span>`;\n            }\n            tmpl += \"</span>\";\n\n            // Show all link\n            tmpl += `\n                    <span class=\"page-link-grid\" id=\"show-all-link-span\"> | <a href=\"javascript:void(0);\" onclick=\"return false;\" page_num=\"all\">Show All</a></span>\n                    </td>\n                </tr>`;\n        }\n\n        // Grid operations for multiple items.\n        if (options.show_item_checkboxes) {\n            // start template\n            tmpl += `\n                <tr>\n                    <input type=\"hidden\" id=\"operation\" name=\"operation\" value=\"\">\n                    <td></td>\n                    <td colspan=\"100\">\n                        For <span class=\"grid-selected-count\"></span> selected items: \n            `;\n\n            // configure buttons for operations\n            for (let operation of options.operations) {\n                if (operation.allow_multiple) {\n                    tmpl += `<input type=\"button\" value=\"${\n                        operation.label\n                    }\" class=\"operation-button action-button\">&nbsp;`;\n                }\n            }\n\n            // finalize template\n            tmpl += \"</td>\" + \"</tr>\";\n        }\n\n        // count global operations\n        var found_global = false;\n        for (let operation of options.operations) {\n            if (operation.global_operation) {\n                found_global = true;\n                break;\n            }\n        }\n\n        // add global operations\n        if (found_global) {\n            tmpl += \"<tr>\" + '<td colspan=\"100\">';\n            for (let operation of options.operations) {\n                if (operation.global_operation) {\n                    tmpl += `<a class=\"action-button\" href=\"${operation.global_operation}\">${operation.label}</a>`;\n                }\n            }\n            tmpl += \"</td>\" + \"</tr>\";\n        }\n\n        // add legend\n        if (options.legend) {\n            tmpl += `<tr><td colspan=\"100\">${options.legend}</td></tr>`;\n        }\n\n        // return\n        return tmpl;\n    },\n\n    // template\n    message: function(options) {\n        var status = options.status;\n        if ([\"success\", \"ok\"].indexOf(status) != -1) {\n            status = \"done\";\n        }\n        return `<p><div class=\"${status}message transient-message\">${_.escape(\n            options.message\n        )}</div><div style=\"clear: both\"></div></p>`;\n    },\n\n    // template\n    grid_filters: function(options) {\n        // get filters\n        var default_filter_dict = options.default_filter_dict;\n        var filters = options.filters;\n\n        // show advanced search if flag set or if there are filters for advanced search fields\n        var advanced_search_display = \"none\";\n        if (options.advanced_search) {\n            advanced_search_display = \"block\";\n        }\n\n        // identify columns with advanced filtering\n        var show_advanced_search_link = false;\n        for (let column of options.columns) {\n            if (column.filterable == \"advanced\") {\n                var column_key = column.key;\n                var f_key = filters[column_key];\n                var d_key = default_filter_dict[column_key];\n                if (f_key && d_key && f_key != d_key) {\n                    advanced_search_display = \"block\";\n                }\n                show_advanced_search_link = true;\n            }\n        }\n\n        // hide standard search if advanced is shown\n        var standard_search_display = \"block\";\n        if (advanced_search_display == \"block\") {\n            standard_search_display = \"none\";\n        }\n\n        //\n        // standard search\n        //\n        var tmpl = `<div id=\"standard-search\" style=\"display: ${standard_search_display};\"><table><tr><td style=\"padding: 0;\"><table>`;\n\n        // add standard filters\n        for (let column of options.columns) {\n            if (column.filterable == \"standard\") {\n                tmpl += this.grid_column_filter(options, column);\n            }\n        }\n\n        // finalize standard search\n        tmpl += \"</table>\" + \"</td>\" + \"</tr>\" + \"<tr>\" + \"<td>\";\n\n        // show advanced search link in standard display\n        if (show_advanced_search_link) {\n            tmpl += '<a href=\"\" class=\"advanced-search-toggle\">Advanced Search</a>';\n        }\n\n        // finalize standard search display\n        tmpl += \"</td>\" + \"</tr>\" + \"</table>\" + \"</div>\";\n\n        //\n        // advanced search\n        //\n        tmpl += `<div id=\"advanced-search\" style=\"display: ${advanced_search_display}; margin-top: 5px; border: 1px solid #ccc;\"><table><tr><td style=\"text-align: left\" colspan=\"100\"><a href=\"\" class=\"advanced-search-toggle\">Close Advanced Search</a></td></tr>`;\n\n        // add advanced filters\n        for (let column of options.columns) {\n            if (column.filterable == \"advanced\") {\n                tmpl += this.grid_column_filter(options, column);\n            }\n        }\n\n        // finalize advanced search template\n        tmpl += \"</table>\" + \"</div>\";\n\n        // return template\n        return tmpl;\n    },\n\n    // template\n    grid_column_filter: function(options, column) {\n        // collect parameters\n        var filters = options.filters;\n        var column_label = column.label;\n        var column_key = column.key;\n        if (column.filterable == \"advanced\") {\n            column_label = column_label.toLowerCase();\n        }\n\n        // start\n        var tmpl = \"<tr>\";\n\n        if (column.filterable == \"advanced\") {\n            tmpl += `<td align=\"left\" style=\"padding-left: 10px\">${column_label}:</td>`;\n        }\n        tmpl += '<td style=\"padding-bottom: 1px;\">';\n        if (column.is_text) {\n            tmpl += `<form class=\"text-filter-form\" column_key=\"${column_key}\" action=\"${options.url}\" method=\"get\" >`;\n            // Carry forward filtering criteria with hidden inputs.\n            for (let column of options.columns) {\n                var filter_value = filters[column.key];\n                if (filter_value) {\n                    if (filter_value != \"All\") {\n                        if (column.is_text) {\n                            filter_value = JSON.stringify(filter_value);\n                        }\n                        tmpl += `<input type=\"hidden\" id=\"${column.key}\" name=\"f-${\n                            column.key\n                        }\" value=\"${filter_value}\"/>`;\n                    }\n                }\n            }\n            // Print current filtering criteria and links to delete.\n            tmpl += `<span id=\"${column_key}-filtering-criteria\">`;\n\n            // add filters\n            var column_filter = filters[column_key];\n            if (column_filter) {\n                // identify type\n                var type = $.type(column_filter);\n\n                // single filter value\n                if (type == \"string\") {\n                    if (column_filter != \"All\") {\n                        // append template\n                        tmpl += this.filter_element(column_key, column_filter);\n                    }\n                }\n\n                // multiple filter values\n                if (type == \"array\") {\n                    for (let i in column_filter) {\n                        // copy filters and remove entry\n                        var params = column_filter;\n                        params = params.slice(i);\n\n                        // append template\n                        tmpl += this.filter_element(column_key, column_filter[i]);\n                    }\n                }\n            }\n\n            // close span\n            tmpl += \"</span>\";\n\n            // Set value, size of search input field. Minimum size is 20 characters.\n            var value = \"\";\n            var size = 20;\n            if (column.filterable == \"standard\") {\n                value = column.label.toLowerCase();\n                if (value.length < 20) {\n                    size = value.length;\n                }\n                // +4 to account for space after placeholder\n                size = size + 4;\n            }\n\n            // print input field for column\n            tmpl += `\n                <span class=\"search-box\">\n                    <input class=\"search-box-input\" id=\"input-${column_key}-filter\" name=\"f-${column_key}\" type=\"text\" placeholder=\"${value}\" size=\"${size}\"/>\n                    <button type=\"submit\" style=\"background: transparent; border: none; padding: 4px; margin: 0px;\">\n                        <i class=\"fa fa-search\"></i>\n                    </button>\n                </span>\n            </form>`;\n        } else {\n            // filter criteria\n            tmpl += `<span id=\"${column_key}-filtering-criteria\">`;\n\n            // add category filters\n            var seperator = false;\n            for (var cf_label in options.categorical_filters[column_key]) {\n                // get category filter\n                var cf = options.categorical_filters[column_key][cf_label];\n\n                // each filter will have only a single argument, so get that single argument\n                var cf_key = \"\";\n                var cf_arg = \"\";\n                for (var key in cf) {\n                    cf_key = key;\n                    cf_arg = cf[key];\n                }\n\n                // add seperator\n                if (seperator) {\n                    tmpl += \" | \";\n                }\n                seperator = true;\n\n                // add category\n                var filter = filters[column_key];\n                if (filter && cf[column_key] && filter == cf_arg) {\n                    tmpl += `<span class=\"categorical-filter ${column_key}-filter current-filter\">${cf_label}</span>`;\n                } else {\n                    tmpl += `<span class=\"categorical-filter ${column_key}-filter\"><a href=\"javascript:void(0);\" filter_key=\"${cf_key}\" filter_val=\"${cf_arg}\">${cf_label}</a></span>`;\n                }\n            }\n            tmpl += \"</span>\";\n        }\n        tmpl += \"</td>\" + \"</tr>\";\n\n        // return template\n        return tmpl;\n    },\n\n    // template for filter items\n    filter_element: function(filter_key, filter_value) {\n        filter_value = Utils.sanitize(filter_value);\n        return `<span class=\"text-filter-val\">${filter_value}<a href=\"javascript:void(0);\" filter_key=\"${filter_key}\" filter_val=\"${filter_value}\"><i class=\"fa fa-times\" style=\"padding-left: 5px; padding-bottom: 6px;\"/></a></span>`;\n    }\n};\n"]}