{"version":3,"sources":["mvc/upload/default/default-row.js"],"names":["Backbone","View","extend","status_classes","init","queued","running","warning","success","error","initialize","app","options","self","list_extensions","model","setElement","_template","$mode","$","$title","$text","$size","$info_text","$info_progress","$text_content","$settings","$symbol","$progress_bar","$percentage","settings","title","container","placement","default_genome","select_genome","value","default_extension","select_extension","css","data","list_genomes","onchange","genome","set","_","filter","ext","composite_files","extension","on","_removeRow","upload_ext","upload_extension","extension_popup","visible","hide","remove","_makeUploadExtensionsPopover","e","preventDefault","_showSettings","url_paste","target","val","file_size","length","listenTo","_refreshPercentage","_refreshStatus","_refreshInfo","_refreshGenome","_refreshExtension","_refreshFileSize","render","_refreshType","prototype","apply","attributes","html","escape","file_name","bytesToString","removeClass","addClass","file_mode","width","$el","top","height","show","get","info","percentage","parseInt","status","enabled","attr","enable","disable","indexOf","collection","empty","append","text","list","id"],"mappings":"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","file":"../../../../scripts/mvc/upload/default/default-row.js","sourcesContent":["import _l from \"utils/localization\";\n/** Renders the default uploader rows */\nimport Utils from \"utils/utils\";\nimport UploadModel from \"mvc/upload/upload-model\";\nimport UploadSettings from \"mvc/upload/upload-settings\";\nimport Popover from \"mvc/ui/ui-popover\";\nimport UploadExtension from \"mvc/upload/upload-extension\";\nimport Select from \"mvc/ui/ui-select\";\nexport default Backbone.View.extend({\n    /** Dictionary of upload states and associated icons */\n    status_classes: {\n        init: \"upload-icon-button fa fa-trash-o\",\n        queued: \"upload-icon fa fa-spinner fa-spin\",\n        running: \"upload-icon fa fa-spinner fa-spin\",\n        warning: \"upload-icon fa fa-spinner fa-spin\",\n        success: \"upload-icon-button fa fa-check\",\n        error: \"upload-icon-button fa fa-exclamation-triangle\"\n    },\n\n    initialize: function(app, options) {\n        var self = this;\n        this.app = app;\n        this.list_extensions = app.list_extensions;\n        this.model = options.model;\n        this.setElement(this._template(options.model));\n        this.$mode = this.$(\".upload-mode\");\n        this.$title = this.$(\".upload-title\");\n        this.$text = this.$(\".upload-text\");\n        this.$size = this.$(\".upload-size\");\n        this.$info_text = this.$(\".upload-info-text\");\n        this.$info_progress = this.$(\".upload-info-progress\");\n        this.$text_content = this.$(\".upload-text-content\");\n        this.$settings = this.$(\".upload-settings\");\n        this.$symbol = this.$(\".upload-symbol\");\n        this.$progress_bar = this.$(\".upload-progress-bar\");\n        this.$percentage = this.$(\".upload-percentage\");\n\n        // append popup to settings icon\n        this.settings = new Popover.View({\n            title: _l(\"Upload configuration\"),\n            container: this.$(\".upload-settings\"),\n            placement: \"bottom\"\n        });\n\n        // identify default genome and extension values\n        var default_genome = this.app.select_genome.value();\n        var default_extension = this.app.select_extension.value();\n\n        // create select genomes\n        this.select_genome = new Select.View({\n            css: \"upload-genome\",\n            data: self.app.list_genomes,\n            container: this.$(\".upload-genome\"),\n            value: default_genome,\n            onchange: function(genome) {\n                self.model.set(\"genome\", genome);\n            }\n        });\n\n        // create select extension\n        this.select_extension = new Select.View({\n            css: \"upload-extension\",\n            data: _.filter(this.list_extensions, ext => !ext.composite_files),\n            container: this.$(\".upload-extension\"),\n            value: default_extension,\n            onchange: function(extension) {\n                self.model.set(\"extension\", extension);\n            }\n        });\n\n        // initialize genome and extension values\n        this.model.set({\n            genome: default_genome,\n            extension: default_extension\n        });\n\n        // handle click event\n        this.$symbol.on(\"click\", () => {\n            self._removeRow();\n        });\n\n        // handle extension info popover\n        this.$(\".upload-extension-info\")\n            .on(\"click\", e => {\n                let upload_ext = this.upload_extension;\n                if (upload_ext) {\n                    if (upload_ext.extension_popup.visible) {\n                        upload_ext.extension_popup.hide();\n                    } else {\n                        upload_ext.extension_popup.remove();\n                        this._makeUploadExtensionsPopover(e);\n                    }\n                } else {\n                    this._makeUploadExtensionsPopover(e);\n                }\n            })\n            .on(\"mousedown\", e => {\n                e.preventDefault();\n            });\n\n        // handle settings popover\n        this.$settings\n            .on(\"click\", e => {\n                self._showSettings();\n            })\n            .on(\"mousedown\", e => {\n                e.preventDefault();\n            });\n\n        // handle text editing event\n        this.$text_content.on(\"change input\", e => {\n            self.model.set({\n                url_paste: $(e.target).val(),\n                file_size: $(e.target).val().length\n            });\n        });\n\n        // model events\n        this.listenTo(this.model, \"change:percentage\", () => {\n            self._refreshPercentage();\n        });\n        this.listenTo(this.model, \"change:status\", () => {\n            self._refreshStatus();\n        });\n        this.listenTo(this.model, \"change:info\", () => {\n            self._refreshInfo();\n        });\n        this.listenTo(this.model, \"change:genome\", () => {\n            self._refreshGenome();\n        });\n        this.listenTo(this.model, \"change:extension\", () => {\n            self._refreshExtension();\n        });\n        this.listenTo(this.model, \"change:file_size\", () => {\n            self._refreshFileSize();\n        });\n    },\n\n    render: function() {\n        this._refreshType();\n        this._refreshPercentage();\n        this._refreshStatus();\n        this._refreshInfo();\n        this._refreshGenome();\n        this._refreshExtension();\n        this._refreshFileSize();\n    },\n\n    /** Remove view */\n    remove: function() {\n        this.select_genome.remove();\n        this.select_extension.remove();\n        Backbone.View.prototype.remove.apply(this);\n    },\n\n    /** Render type */\n    _refreshType: function() {\n        var options = this.model.attributes;\n        this.$title.html(_.escape(options.file_name));\n        this.$size.html(Utils.bytesToString(options.file_size));\n        this.$mode\n            .removeClass()\n            .addClass(\"upload-mode\")\n            .addClass(\"text-primary\");\n        if (options.file_mode == \"new\") {\n            this.$text\n                .css({\n                    width: `${this.$el.width() - 16}px`,\n                    top: `${this.$el.height() - 8}px`\n                })\n                .show();\n            this.$el.height(this.$el.height() - 8 + this.$text.height() + 16);\n            this.$mode.addClass(\"fa fa-edit\");\n        } else if (options.file_mode == \"local\") {\n            this.$mode.addClass(\"fa fa-laptop\");\n        } else if (options.file_mode == \"ftp\") {\n            this.$mode.addClass(\"fa fa-folder-open-o\");\n        }\n    },\n\n    /** Update extension */\n    _refreshExtension: function() {\n        this.select_extension.value(this.model.get(\"extension\"));\n    },\n\n    /** Update genome */\n    _refreshGenome: function() {\n        this.select_genome.value(this.model.get(\"genome\"));\n    },\n\n    /** Refresh info text */\n    _refreshInfo: function() {\n        var info = this.model.get(\"info\");\n        if (info) {\n            this.$info_text.html(`<strong>Warning: </strong>${info}`).show();\n        } else {\n            this.$info_text.hide();\n        }\n    },\n\n    /** Refresh percentage status */\n    _refreshPercentage: function() {\n        var percentage = parseInt(this.model.get(\"percentage\"));\n        this.$progress_bar.css({ width: `${percentage}%` });\n        this.$percentage.html(percentage != 100 ? `${percentage}%` : \"Adding to history...\");\n    },\n\n    /** Refresh status */\n    _refreshStatus: function() {\n        var status = this.model.get(\"status\");\n        this.$symbol\n            .removeClass()\n            .addClass(\"upload-symbol\")\n            .addClass(this.status_classes[status]);\n        this.model.set(\"enabled\", status == \"init\");\n        var enabled = this.model.get(\"enabled\");\n        this.$text_content.attr(\"disabled\", !enabled);\n        if (enabled) {\n            this.select_genome.enable();\n            this.select_extension.enable();\n        } else {\n            this.select_genome.disable();\n            this.select_extension.disable();\n        }\n        this.$info_progress.show();\n        this.$el.removeClass().addClass(\"upload-row\");\n        if (status == \"success\") {\n            this.$el.addClass(\"table-success\");\n            this.$percentage.html(\"100%\");\n        } else if (status == \"error\") {\n            this.$el.addClass(\"table-danger\");\n            this.$info_progress.hide();\n        } else if (status == \"warning\") {\n            this.$el.addClass(\"table-warning\");\n            this.$info_progress.hide();\n        }\n    },\n\n    /** Refresh file size */\n    _refreshFileSize: function() {\n        this.$size.html(Utils.bytesToString(this.model.get(\"file_size\")));\n    },\n\n    /** Remove row */\n    _removeRow: function() {\n        if ([\"init\", \"success\", \"error\"].indexOf(this.model.get(\"status\")) !== -1) {\n            this.app.collection.remove(this.model);\n        }\n    },\n\n    /** Attach file info popup */\n    _showSettings: function() {\n        if (!this.settings.visible) {\n            this.settings.empty();\n            this.settings.append(new UploadSettings(this).$el);\n            this.settings.show();\n        } else {\n            this.settings.hide();\n        }\n    },\n\n    /** Make extension popover */\n    _makeUploadExtensionsPopover: function(e) {\n        this.upload_extension = new UploadExtension({\n            $el: $(e.target),\n            title: this.select_extension.text(),\n            extension: this.select_extension.value(),\n            list: this.list_extensions\n        });\n    },\n\n    /** View template */\n    _template: function(options) {\n        return `<tr id=\"upload-row-${\n            options.id\n        }\" class=\"upload-row\"><td><div class=\"upload-text-column\"><div class=\"upload-mode\"/><div class=\"upload-title\"/><div class=\"upload-text\"><div class=\"upload-text-info\">You can tell Galaxy to download data from web by entering URL in this box (one per line). You can also directly paste the contents of a file.</div><textarea class=\"upload-text-content form-control\"/></div></div></td><td><div class=\"upload-size\"/></td><td><div class=\"upload-extension\" style=\"float: left;\"/>&nbsp;&nbsp<div class=\"upload-extension-info upload-icon-button fa fa-search\"/></td><td><div class=\"upload-genome\"/></td><td><div class=\"upload-settings upload-icon-button fa fa-gear\"/></td><td><div class=\"upload-info\"><div class=\"upload-info-text\"/><div class=\"upload-info-progress progress\"><div class=\"upload-progress-bar progress-bar progress-bar-success\"/><div class=\"upload-percentage\">0%</div></div></div></td><td><div class=\"upload-symbol ${\n            this.status_classes.init\n        }\"/></td></tr>`;\n    }\n});\n"]}