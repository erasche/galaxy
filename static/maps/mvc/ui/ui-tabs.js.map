{"version":3,"sources":["mvc/ui/ui-tabs.js"],"names":["Backbone","View","extend","initialize","options","collection","Collection","model","Model","onchange","visible","set","setElement","$","_template","$nav","$content","$el","on","hide","render","listenTo","_add","_remove","_change","_reset","id","get","length","first","find","removeClass","children","addClass","size","current","show","add","del","remove","delAll","reset","showTab","hideTab","tab_model","self","attributes","append","attr","_template_tab","tooltip","title","placement","container","e","preventDefault","empty","$tmpl","$href","icon"],"mappings":"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","file":"../../../scripts/mvc/ui/ui-tabs.js","sourcesContent":["/**\n *  Renders tabs e.g. used in the charts editor, behaves similar to repeat and section rendering\n */\nimport * as Backbone from \"backbone\";\n\n/* global $ */\nexport var View = Backbone.View.extend({\n    initialize: function(options) {\n        this.collection = new Backbone.Collection();\n        this.model =\n            (options && options.model) ||\n            new Backbone.Model({\n                onchange: null,\n                visible: true\n            }).set(options);\n        this.setElement($(this._template()));\n        this.$nav = this.$(\".tab-navigation\");\n        this.$content = this.$(\".tab-content\");\n        this.$el.on(\"click\", () => {\n            $(\".tooltip\").hide();\n        });\n        this.render();\n        this.listenTo(this.model, \"change\", this.render, this);\n        this.listenTo(this.collection, \"add\", this._add, this);\n        this.listenTo(this.collection, \"remove\", this._remove, this);\n        this.listenTo(this.collection, \"change\", this._change, this);\n        this.listenTo(this.collection, \"reset\", this._reset, this);\n        this.listenTo(this.collection, \"add remove reset\", this.render, this);\n    },\n\n    render: function() {\n        var id = this.model.get(\"current\");\n        id = this.$(`#${id}`).length > 0 ? id : this.first();\n        if (id) {\n            this.$nav.find(\".nav-link.active\").removeClass(\"active\");\n            this.$content.children().removeClass(\"active\");\n            this.$(`#tab-${id} .nav-link`).addClass(\"active\");\n            this.$(`#${id}`).addClass(\"active\");\n        }\n        this.$el[this.model.get(\"visible\") ? \"fadeIn\" : \"fadeOut\"](\"fast\");\n        this.$nav[this.size() > 1 ? \"show\" : \"hide\"]();\n    },\n\n    /** Returns tab id for currently shown tab */\n    current: function() {\n        return this.model.get(\"current\");\n    },\n\n    /** Show tab view and highlight a tab by id */\n    show: function(id) {\n        if (id) {\n            this.model.set({ current: id, visible: true });\n            this.model.get(\"onchange\") && this.model.get(\"onchange\")(id);\n        }\n    },\n\n    /** Hide tab view */\n    hide: function() {\n        this.model.set(\"visible\", false);\n    },\n\n    /** Returns first tab */\n    first: function() {\n        var model = this.collection.first();\n        return model && model.id;\n    },\n\n    /** Returns current number of tabs */\n    size: function() {\n        return this.collection.length;\n    },\n\n    /** Adds a new tab */\n    add: function(options) {\n        this.collection.add(options);\n    },\n\n    /** Delete tab */\n    del: function(id) {\n        this.collection.remove(id);\n    },\n\n    /** Delete all tabs */\n    delAll: function() {\n        this.collection.reset();\n    },\n\n    /** Show tab */\n    showTab: function(id) {\n        this.collection.get(id).set(\"hidden\", false);\n    },\n\n    /** Hide tab */\n    hideTab: function(id) {\n        this.collection.get(id).set(\"hidden\", true);\n    },\n\n    /** Adds a new tab */\n    _add: function(tab_model) {\n        var self = this;\n        var options = tab_model.attributes;\n        this.$content.append(\n            $(\"<div/>\")\n                .attr(\"id\", options.id)\n                .addClass(\"tab-pane\")\n                .append(options.$el)\n        );\n        this.$nav.append(\n            $(this._template_tab(options))\n                .show()\n                .tooltip({\n                    title: options.tooltip || \"\",\n                    placement: \"bottom\",\n                    container: self.$el\n                })\n                .on(\"click\", e => {\n                    e.preventDefault();\n                    self.show(options.id);\n                })\n        );\n        if (this.size() == 1) {\n            this.show(options.id);\n        }\n    },\n\n    /** Delete tab */\n    _remove: function(tab_model) {\n        this.$(`#tab-${tab_model.id}`).remove();\n        this.$(`#${tab_model.id}`).remove();\n    },\n\n    /** Reset collection */\n    _reset: function() {\n        this.$nav.empty();\n        this.$content.empty();\n    },\n\n    /** Change tab */\n    _change: function(tab_model) {\n        this.$(`#tab-${tab_model.id}`)[tab_model.get(\"hidden\") ? \"hide\" : \"show\"]();\n    },\n\n    /** Main template */\n    _template: function() {\n        return $(\"<div/>\")\n            .addClass(\"ui-tabs tabbable tabs-left\")\n            .append(\n                $(\"<ul/>\")\n                    .attr(\"style\", \"display: flex\")\n                    .addClass(\"tab-navigation nav nav-tabs\")\n            )\n            .append($(\"<div/>\").addClass(\"tab-content\"));\n    },\n\n    /** Tab template */\n    _template_tab: function(options) {\n        var $tmpl = $(\"<li/>\")\n            .addClass(\"tab-element nav-item\")\n            .attr(\"id\", `tab-${options.id}`)\n            .append(\n                $(\"<a/>\")\n                    .addClass(\"nav-link\")\n                    .attr(\"id\", `tab-title-link-${options.id}`)\n            );\n        var $href = $tmpl.find(\"a\");\n        options.icon &&\n            $href.append(\n                $(\"<i/>\")\n                    .addClass(\"tab-icon fa\")\n                    .addClass(options.icon)\n            );\n        $href.append(\n            $(\"<span/>\")\n                .attr(\"id\", `tab-title-text-${options.id}`)\n                .addClass(\"tab-title-text\")\n                .append(options.title)\n        );\n        return $tmpl;\n    }\n});\n\nexport default { View: View };\n"]}