{"version":3,"sources":["mvc/ui/ui-buttons.js"],"names":["Backbone","ButtonDefault","View","extend","initialize","options","model","Model","id","uid","title","icon","cls","wait","wait_text","wait_cls","disabled","percentage","visible","set","setElement","$","attr","append","$icon","$title","$progress","$progress_bar","listenTo","render","attributes","$el","removeClass","addClass","css","off","on","hide","onclick","tooltip","placement","width","prop","html","show","disable","enable","unwait","setIcon","ButtonLink","href","target","ButtonCheck","icons","value","onchange","get","new_val","total","undefined","ButtonIcon","$button","ButtonMenu","$menu","pull","onunload","tag","collection","Collection","$root","display","where","length","e","preventDefault","remove","each","suboptions","submodel","$link","divider","addMenu","add","merge"],"mappings":"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","file":"../../../scripts/mvc/ui/ui-buttons.js","sourcesContent":["/** This module contains all button views. */\nimport Utils from \"utils/utils\";\nimport * as Backbone from \"backbone\";\n\n/* global $ */\n\n/** This renders the default button which is used e.g. at the bottom of the upload modal. */\nvar ButtonDefault = Backbone.View.extend({\n    initialize: function(options) {\n        this.model =\n            (options && options.model) ||\n            new Backbone.Model({\n                id: Utils.uid(),\n                title: \"\",\n                icon: \"\",\n                cls: \"btn btn-secondary\",\n                wait: false,\n                wait_text: \"Sending...\",\n                wait_cls: \"btn btn-info\",\n                disabled: false,\n                percentage: -1,\n                visible: true\n            }).set(options);\n        this.setElement(\n            $(\"<button/>\")\n                .attr(\"type\", \"button\")\n                .append((this.$icon = $(\"<i/>\")))\n                .append((this.$title = $(\"<span/>\")))\n                .append((this.$progress = $(\"<div/>\").append((this.$progress_bar = $(\"<div/>\")))))\n        );\n        this.listenTo(this.model, \"change\", this.render, this);\n        this.render();\n    },\n\n    render: function() {\n        var options = this.model.attributes;\n        this.$el\n            .removeClass()\n            .addClass(\"ui-button-default\")\n            .addClass(options.disabled && \"disabled\")\n            .attr(\"id\", options.id)\n            .attr(\"disabled\", options.disabled)\n            .css(\"display\", options.visible ? \"inline-block\" : \"none\")\n            .off(\"click\")\n            .on(\"click\", () => {\n                $(\".tooltip\").hide();\n                options.onclick && !this.disabled && options.onclick();\n            })\n            .tooltip({ title: options.tooltip || \"\", placement: \"bottom\" });\n        this.$progress.addClass(\"progress\").css(\"display\", options.percentage !== -1 ? \"block\" : \"none\");\n        this.$progress_bar.addClass(\"progress-bar\").css({ width: `${options.percentage}%` });\n        this.$icon.removeClass().addClass(\"icon fa\");\n        this.$title.removeClass().addClass(\"title\");\n        if (options.wait) {\n            this.$el.addClass(options.wait_cls).prop(\"disabled\", true);\n            this.$icon.addClass(\"fa-spinner fa-spin ui-margin-right\");\n            this.$title.html(options.wait_text);\n        } else {\n            this.$el.addClass(options.cls);\n            this.$icon.addClass(options.icon);\n            this.$title.html(options.title);\n            options.icon && options.title && this.$icon.addClass(\"ui-margin-right\");\n        }\n    },\n\n    /** Show button */\n    show: function() {\n        this.model.set(\"visible\", true);\n    },\n\n    /** Hide button */\n    hide: function() {\n        this.model.set(\"visible\", false);\n    },\n\n    /** Disable button */\n    disable: function() {\n        this.model.set(\"disabled\", true);\n    },\n\n    /** Enable button */\n    enable: function() {\n        this.model.set(\"disabled\", false);\n    },\n\n    /** Show spinner to indicate that the button is not ready to be clicked */\n    wait: function() {\n        this.model.set(\"wait\", true);\n    },\n\n    /** Hide spinner to indicate that the button is ready to be clicked */\n    unwait: function() {\n        this.model.set(\"wait\", false);\n    },\n\n    /** Change icon */\n    setIcon: function(icon) {\n        this.model.set(\"icon\", icon);\n    }\n});\n\n/** This button allows the right-click/open-in-new-tab feature, its used e.g. for panel buttons. */\nvar ButtonLink = ButtonDefault.extend({\n    initialize: function(options) {\n        this.model =\n            (options && options.model) ||\n            new Backbone.Model({\n                id: Utils.uid(),\n                visible: true,\n                title: \"\",\n                icon: \"\",\n                cls: \"\"\n            }).set(options);\n        this.setElement($(\"<a/>\").append((this.$icon = $(\"<span/>\"))));\n        this.listenTo(this.model, \"change\", this.render, this);\n        this.render();\n    },\n\n    render: function() {\n        var options = this.model.attributes;\n        this.$el\n            .removeClass()\n            .addClass(options.cls)\n            .attr({\n                id: options.id,\n                href: options.href || \"javascript:void(0)\",\n                title: options.title,\n                target: options.target || \"_top\",\n                disabled: options.disabled\n            })\n            .css(\"display\", options.visible ? \"inline-block\" : \"none\")\n            .tooltip({ placement: \"bottom\" })\n            .off(\"click\")\n            .on(\"click\", () => {\n                options.onclick && !options.disabled && options.onclick();\n            });\n        this.$icon.removeClass().addClass(options.icon);\n    }\n});\n\n/** The check button is used in the tool form and allows to distinguish between multiple states e.g. all, partially and nothing selected. */\nvar ButtonCheck = Backbone.View.extend({\n    initialize: function(options) {\n        this.model =\n            (options && options.model) ||\n            new Backbone.Model({\n                id: Utils.uid(),\n                title: \"Select/Unselect all\",\n                icons: [\"fa-square-o\", \"fa-minus-square-o\", \"fa-check-square-o\"],\n                value: 0,\n                visible: true,\n                onchange: function() {}\n            }).set(options);\n        this.setElement(\n            $(\"<div/>\")\n                .append((this.$icon = $(\"<span/>\")))\n                .append((this.$title = $(\"<span/>\")))\n        );\n        this.listenTo(this.model, \"change\", this.render, this);\n        this.render();\n    },\n\n    render: function(options) {\n        var options = this.model.attributes;\n        this.$el\n            .addClass(\"ui-button-check\")\n            .css(\"display\", options.visible ? \"inline-block\" : \"none\")\n            .off(\"click\")\n            .on(\"click\", () => {\n                this.model.set(\"value\", (this.model.get(\"value\") === 0 && 2) || 0);\n                options.onclick && options.onclick();\n            });\n        this.$title.html(options.title);\n        this.$icon\n            .removeClass()\n            .addClass(\"icon fa ui-margin-right\")\n            .addClass(options.icons[options.value]);\n    },\n\n    /* Sets a new value and/or returns the value.\n        * @param{Integer}   new_val - Set a new value 0=unchecked, 1=partial and 2=checked.\n        * OR:\n        * @param{Integer}   new_val - Number of selected options.\n        * @param{Integer}   total   - Total number of available options.\n        */\n    value: function(new_val, total) {\n        if (new_val !== undefined) {\n            if (total && new_val !== 0) {\n                new_val = (new_val !== total && 1) || 2;\n            }\n            this.model.set(\"value\", new_val);\n            this.model.get(\"onchange\")(this.model.get(\"value\"));\n        }\n        return this.model.get(\"value\");\n    }\n});\n\n/** This renders a differently styled, more compact button version. */\nvar ButtonIcon = ButtonDefault.extend({\n    initialize: function(options) {\n        this.model =\n            (options && options.model) ||\n            new Backbone.Model({\n                id: Utils.uid(),\n                title: \"\",\n                icon: \"\",\n                visible: true,\n                cls: \"ui-button-icon\",\n                disabled: false\n            }).set(options);\n        this.setElement(\n            $(\"<div/>\").append(\n                (this.$button = $(\"<div/>\")\n                    .append((this.$icon = $(\"<i/>\")))\n                    .append((this.$title = $(\"<span/>\"))))\n            )\n        );\n        this.listenTo(this.model, \"change\", this.render, this);\n        this.render();\n    },\n\n    render: function(options) {\n        var options = this.model.attributes;\n        this.$el\n            .removeClass()\n            .addClass(options.cls)\n            .addClass(options.disabled && \"disabled\")\n            .css(\"display\", options.visible ? \"inline-block\" : \"none\")\n            .attr(\"disabled\", options.disabled)\n            .attr(\"id\", options.id)\n            .off(\"click\")\n            .on(\"click\", () => {\n                $(\".tooltip\").hide();\n                !options.disabled && options.onclick && options.onclick();\n            });\n        this.$button.addClass(\"button\").tooltip({ title: options.tooltip || \"\", placement: \"bottom\" });\n        this.$icon\n            .removeClass()\n            .addClass(\"icon fa\")\n            .addClass(options.icon);\n        this.$title.addClass(\"title\").html(options.title);\n        options.icon && options.title && this.$icon.addClass(\"ui-margin-right\");\n    }\n});\n\n/** This class creates a button with dropdown menu. */\nvar ButtonMenu = ButtonDefault.extend({\n    $menu: null,\n    initialize: function(options) {\n        this.model =\n            (options && options.model) ||\n            new Backbone.Model({\n                id: \"\",\n                title: \"\",\n                pull: \"right\",\n                icon: null,\n                onclick: null,\n                cls: \"ui-button-icon ui-button-menu\",\n                tooltip: \"\",\n                target: \"\",\n                href: \"\",\n                onunload: null,\n                visible: true,\n                tag: \"\"\n            }).set(options);\n        this.collection = new Backbone.Collection();\n        this.setElement(\n            $(\"<div/>\").append(\n                (this.$root = $(\"<div/>\")\n                    .append((this.$icon = $(\"<i/>\")))\n                    .append((this.$title = $(\"<span/>\"))))\n            )\n        );\n        this.listenTo(this.model, \"change\", this.render, this);\n        this.listenTo(this.collection, \"change add remove reset\", this.render, this);\n        this.render();\n    },\n\n    render: function() {\n        var options = this.model.attributes;\n        this.$el\n            .removeClass()\n            .addClass(\"dropdown\")\n            .addClass(options.cls)\n            .attr(\"id\", options.id)\n            .css({\n                display: options.visible && this.collection.where({ visible: true }).length > 0 ? \"block\" : \"none\"\n            });\n        this.$root\n            .addClass(\"root button dropdown-toggle\")\n            .attr(\"data-toggle\", \"dropdown\")\n            .tooltip({ title: options.tooltip || \"\", placement: \"bottom\" })\n            .off(\"click\")\n            .on(\"click\", e => {\n                $(\".tooltip\").hide();\n                e.preventDefault();\n                options.onclick && options.onclick();\n            });\n        this.$icon\n            .removeClass()\n            .addClass(\"icon fa\")\n            .addClass(options.icon);\n        this.$title\n            .removeClass()\n            .addClass(\"title\")\n            .html(options.title);\n        options.icon && options.title && this.$icon.addClass(\"ui-margin-right\");\n        this.$menu && this.$menu.remove();\n        if (this.collection.length > 0) {\n            this.$menu = $(\"<ul/>\")\n                .addClass(\"menu dropdown-menu dropdown-menu-right\")\n                .addClass(`pull-${this.model.get(\"pull\")}`)\n                .attr(\"role\", \"menu\");\n            this.$el.append(this.$menu);\n        }\n        this.collection.each(submodel => {\n            var suboptions = submodel.attributes;\n            if (suboptions.visible) {\n                var $link = $(\"<a/>\")\n                    .addClass(\"dropdown-item\")\n                    .attr({\n                        href: suboptions.href,\n                        target: suboptions.target\n                    })\n                    .append(\n                        $(\"<i/>\")\n                            .addClass(\"fa\")\n                            .addClass(suboptions.icon)\n                            .css(\"display\", suboptions.icon ? \"inline-block\" : \"none\")\n                    )\n                    .append(suboptions.title)\n                    .on(\"click\", e => {\n                        if (suboptions.onclick) {\n                            e.preventDefault();\n                            suboptions.onclick();\n                        }\n                    });\n                this.$menu.append($(\"<li/>\").append($link));\n                suboptions.divider && this.$menu.append($(\"<li/>\").addClass(\"divider\"));\n            }\n        });\n    },\n\n    /** Add a new menu item */\n    addMenu: function(options) {\n        this.collection.add(\n            Utils.merge(options, {\n                title: \"\",\n                target: \"\",\n                href: \"\",\n                onclick: null,\n                divider: false,\n                visible: true,\n                icon: null,\n                cls: \"button-menu btn-group\"\n            })\n        );\n    }\n});\n\nexport default {\n    ButtonDefault: ButtonDefault,\n    ButtonLink: ButtonLink,\n    ButtonIcon: ButtonIcon,\n    ButtonCheck: ButtonCheck,\n    ButtonMenu: ButtonMenu\n};\n"]}