{"version":3,"sources":["utils/utils.js"],"names":["iframe","deepeach","linkify","clone","isJSON","sanitize","isEmpty","textify","get","request","cssGetAttribute","cssLoadFile","merge","roundToDecimalPlaces","bytesToString","uid","time","appendScriptStyle","getQueryString","setWindowTitle","generateTagStyle","_","src","dict","callback","i","d","isObject","new_dict","inputText","replacedText","replacePattern1","replacePattern2","replacePattern3","replace","obj","JSON","parse","stringify","text","test","content","$","html","value","Array","length","undefined","indexOf","lst","isArray","toString","pos","lastIndexOf","substr","options","top","__utils__get__","cache_key","cache","success","window","console","debug","url","data","response","error","status","ajaxConfig","contentType","type","isEmptyObject","param","dataType","ajax","done","parseJSON","e","fail","response_text","responseText","always","complete","classname","name","el","appendTo","css","remove","Galaxy","root","optionsDefault","defaults","number","numPlaces","placesMultiplier","Math","round","kb","mb","gb","tb","size","normal_font","numberPlaces","unit","rounded","__utils__uid__","Date","hours","getHours","minutes","getMinutes","getDate","getMonth","getFullYear","script","styles","key","decodeURIComponent","location","search","RegExp","encodeURIComponent","title","document","config","brand","hashFnv32a","str","l","hval","charCodeAt","contrastingColor","r","g","b","o","hslToRgb","h","s","hue2rgb","p","q","t","tag","hash","hue","lightnessOffset","lightness","bgColor","brColor","fgColor"],"mappings":"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","file":"../../scripts/utils/utils.js","sourcesContent":["/**\n * Galaxy utilities comprises small functions, which at this point\n * do not require their own classes/files\n */\nimport _l from \"utils/localization\";\nimport * as _ from \"underscore\";\n\n/* global $ */\n/* global Galaxy */\n\n/** Builds a basic iframe */\nexport function iframe(src) {\n    return `<iframe src=\"${src}\" frameborder=\"0\" style=\"width: 100%; height: 100%;\"/>`;\n}\n\n/** Traverse through json */\nexport function deepeach(dict, callback) {\n    for (var i in dict) {\n        var d = dict[i];\n        if (_.isObject(d)) {\n            var new_dict = callback(d);\n            if (new_dict) {\n                dict[i] = new_dict;\n            }\n            deepeach(d, callback);\n        }\n    }\n}\n\n/** Identifies urls and replaces them with anchors */\nexport function linkify(inputText) {\n    var replacedText;\n    var replacePattern1;\n    var replacePattern2;\n    var replacePattern3;\n\n    // URLs starting with http://, https://, or ftp://\n    replacePattern1 = /(\\b(https?|ftp):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/gim;\n    replacedText = inputText.replace(replacePattern1, '<a href=\"$1\" target=\"_blank\">$1</a>');\n\n    // URLs starting with \"www.\" (without // before it, or it'd re-link the ones done above).\n    replacePattern2 = /(^|[^\\/])(www\\.[\\S]+(\\b|$))/gim;\n    replacedText = replacedText.replace(replacePattern2, '$1<a href=\"http://$2\" target=\"_blank\">$2</a>');\n\n    // Change email addresses to mailto:: links.\n    replacePattern3 = /(([a-zA-Z0-9\\-\\_\\.])+@[a-zA-Z\\_]+?(\\.[a-zA-Z]{2,6})+)/gim;\n    replacedText = replacedText.replace(replacePattern3, '<a href=\"mailto:$1\">$1</a>');\n\n    return replacedText;\n}\n\n/** Clone */\nexport function clone(obj) {\n    return JSON.parse(JSON.stringify(obj) || null);\n}\n\n/**\n * Check if a string is a json string\n * @param{String}   text - Content to be validated\n */\nexport function isJSON(text) {\n    return /^[\\],:{}\\s]*$/.test(\n        text\n            .replace(/\\\\[\"\\\\\\/bfnrtu]/g, \"@\")\n            .replace(/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g, \"]\")\n            .replace(/(?:^|:|,)(?:\\s*\\[)+/g, \"\")\n    );\n}\n\n/**\n * Sanitize/escape a string\n * @param{String}   content - Content to be sanitized\n */\nexport function sanitize(content) {\n    return $(\"<div/>\")\n        .text(content)\n        .html();\n}\n\n/**\n * Checks if a value or list of values is `empty`\n * usually used for selectable options\n * @param{String}   value - Value or list to be validated\n */\nexport function isEmpty(value) {\n    if (!(value instanceof Array)) {\n        value = [value];\n    }\n    if (value.length === 0) {\n        return true;\n    }\n    for (var i in value) {\n        if ([\"__null__\", \"__undefined__\", null, undefined].indexOf(value[i]) > -1) {\n            return true;\n        }\n    }\n    return false;\n}\n\n/**\n * Convert list to pretty string\n * @param{String}   lst - List of strings to be converted in human readable list sentence\n */\nexport function textify(lst) {\n    if ($.isArray(lst)) {\n        lst = lst.toString().replace(/,/g, \", \");\n        var pos = lst.lastIndexOf(\", \");\n        if (pos != -1) {\n            lst = `${lst.substr(0, pos)} or ${lst.substr(pos + 2)}`;\n        }\n        return lst;\n    }\n    return \"\";\n}\n\n/**\n * Request handler for GET\n * @param{String}   url     - Url request is made to\n * @param{Function} success - Callback on success\n * @param{Function} error   - Callback on error\n * @param{Boolean}  cache   - Use cached data if available\n */\nexport function get(options) {\n    top.__utils__get__ = top.__utils__get__ || {};\n    var cache_key = JSON.stringify(options);\n    if (options.cache && top.__utils__get__[cache_key]) {\n        if (options.success) {\n            options.success(top.__utils__get__[cache_key]);\n        }\n        window.console.debug(`utils.js::get() - Fetching from cache [${options.url}].`);\n    } else {\n        request({\n            url: options.url,\n            data: options.data,\n            success: function(response) {\n                top.__utils__get__[cache_key] = response;\n                if (options.success) {\n                    options.success(response);\n                }\n            },\n            error: function(response, status) {\n                if (options.error) {\n                    options.error(response, status);\n                }\n            }\n        });\n    }\n}\n\n/**\n * Request handler\n * @param{String}   method  - Request method ['GET', 'POST', 'DELETE', 'PUT']\n * @param{String}   url     - Url request is made to\n * @param{Object}   data    - Data send to url\n * @param{Function} success - Callback on success\n * @param{Function} error   - Callback on error\n */\nexport function request(options) {\n    // prepare ajax\n    var ajaxConfig = {\n        contentType: \"application/json\",\n        type: options.type || \"GET\",\n        data: options.data || {},\n        url: options.url\n    };\n    // encode data into url\n    if (ajaxConfig.type == \"GET\" || ajaxConfig.type == \"DELETE\") {\n        if (!$.isEmptyObject(ajaxConfig.data)) {\n            ajaxConfig.url += ajaxConfig.url.indexOf(\"?\") == -1 ? \"?\" : \"&\";\n            ajaxConfig.url += $.param(ajaxConfig.data, true);\n        }\n        ajaxConfig.data = null;\n    } else {\n        ajaxConfig.dataType = \"json\";\n        ajaxConfig.url = ajaxConfig.url;\n        ajaxConfig.data = JSON.stringify(ajaxConfig.data);\n    }\n\n    // make request\n    $.ajax(ajaxConfig)\n        .done(response => {\n            if (typeof response === \"string\") {\n                try {\n                    response = response.replace(\"Infinity,\", '\"Infinity\",');\n                    response = $.parseJSON(response);\n                } catch (e) {\n                    console.debug(e);\n                }\n            }\n            if (options.success) {\n                options.success(response);\n            }\n        })\n        .fail(response => {\n            var response_text = null;\n            try {\n                response_text = $.parseJSON(response.responseText);\n            } catch (e) {\n                response_text = response.responseText;\n            }\n            if (options.error) {\n                options.error(response_text, response.status);\n            }\n        })\n        .always(() => {\n            if (options.complete) {\n                options.complete();\n            }\n        });\n}\n\n/**\n * Read a property value from CSS\n * @param{String}   classname   - CSS class\n * @param{String}   name        - CSS property\n */\nexport function cssGetAttribute(classname, name) {\n    var el = $(`<div class=\"${classname}\"></div>`);\n    el.appendTo(\":eq(0)\");\n    var value = el.css(name);\n    el.remove();\n    return value;\n}\n\n/**\n * Load a CSS file\n * @param{String}   url - Url of CSS file\n */\nexport function cssLoadFile(url) {\n    if (!$(`link[href^=\"${url}\"]`).length) {\n        $(`<link href=\"${Galaxy.root}${url}\" rel=\"stylesheet\">`).appendTo(\"head\");\n    }\n}\n\n/**\n * Safely merge to dictionaries\n * @param{Object}   options         - Target dictionary\n * @param{Object}   optionsDefault  - Source dictionary\n */\nexport function merge(options, optionsDefault) {\n    if (options) {\n        return _.defaults(options, optionsDefault);\n    } else {\n        return optionsDefault;\n    }\n}\n\n/**\n * Round floaing point 'number' to 'numPlaces' number of decimal places.\n * @param{Object}   number      a floaing point number\n * @param{Object}   numPlaces   number of decimal places\n */\nexport function roundToDecimalPlaces(number, numPlaces) {\n    var placesMultiplier = 1;\n    for (var i = 0; i < numPlaces; i++) {\n        placesMultiplier *= 10;\n    }\n    return Math.round(number * placesMultiplier) / placesMultiplier;\n}\n\n// calculate on import\nvar kb = 1024;\n\nvar mb = kb * kb;\nvar gb = mb * kb;\nvar tb = gb * kb;\n/**\n * Format byte size to string with units\n * @param{Integer}   size           - Size in bytes\n * @param{Boolean}   normal_font    - Switches font between normal and bold\n */\nexport function bytesToString(size, normal_font, numberPlaces) {\n    numberPlaces = numberPlaces !== undefined ? numberPlaces : 1;\n    // identify unit\n    var unit = \"\";\n    if (size >= tb) {\n        size = size / tb;\n        unit = \"TB\";\n    } else if (size >= gb) {\n        size = size / gb;\n        unit = \"GB\";\n    } else if (size >= mb) {\n        size = size / mb;\n        unit = \"MB\";\n    } else if (size >= kb) {\n        size = size / kb;\n        unit = \"KB\";\n    } else if (size > 0) {\n        unit = \"b\";\n    } else {\n        return normal_font ? \"0 b\" : \"<strong>-</strong>\";\n    }\n    // return formatted string\n    var rounded = unit == \"b\" ? size : roundToDecimalPlaces(size, numberPlaces);\n    if (normal_font) {\n        return `${rounded} ${unit}`;\n    } else {\n        return `<strong>${rounded}</strong> ${unit}`;\n    }\n}\n\n/** Create a unique id */\nexport function uid() {\n    top.__utils__uid__ = top.__utils__uid__ || 0;\n    return `uid-${top.__utils__uid__++}`;\n}\n\n/** Create a time stamp */\nexport function time() {\n    var d = new Date();\n    var hours = (d.getHours() < 10 ? \"0\" : \"\") + d.getHours();\n    var minutes = (d.getMinutes() < 10 ? \"0\" : \"\") + d.getMinutes();\n    return `${d.getDate()}/${d.getMonth() + 1}/${d.getFullYear()}, ${hours}:${minutes}`;\n}\n\n/** Append script and style tags to Galaxy main application */\nexport function appendScriptStyle(data) {\n    // create a script tag inside head tag\n    if (data.script && data.script !== \"\") {\n        $(\"<script/>\", { type: \"text/javascript\" })\n            .text(data.script)\n            .appendTo(\"head\");\n    }\n    // create a style tag inside head tag\n    if (data.styles && data.styles !== \"\") {\n        $(\"<style/>\", { type: \"text/css\" })\n            .text(data.styles)\n            .appendTo(\"head\");\n    }\n}\n\n/** Get querystrings from url */\nexport function getQueryString(key) {\n    return decodeURIComponent(\n        window.location.search.replace(\n            new RegExp(`^(?:.*[&\\\\?]${encodeURIComponent(key).replace(/[\\.\\+\\*]/g, \"\\\\$&\")}(?:\\\\=([^&]*))?)?.*$`, \"i\"),\n            \"$1\"\n        )\n    );\n}\n\nexport function setWindowTitle(title) {\n    if (title) {\n        window.document.title = `Galaxy ${window.Galaxy.config.brand ? ` | ${window.Galaxy.config.brand}` : \"\"} | ${_l(\n            title\n        )}`;\n    } else {\n        window.document.title = `Galaxy ${window.Galaxy.config.brand ? ` | ${window.Galaxy.config.brand}` : \"\"}`;\n    }\n}\n\n/**\n * Calculate a 32 bit FNV-1a hash\n * Found here: https://gist.github.com/vaiorabbit/5657561\n * Ref.: http://isthe.com/chongo/tech/comp/fnv/\n *\n * @param {string} str the input value\n * @returns {integer}\n */\nfunction hashFnv32a(str) {\n    var i, l,\n        hval = 0x811c9dc5;\n\n    for (i = 0, l = str.length; i < l; i++) {\n        hval ^= str.charCodeAt(i);\n        hval += (hval << 1) + (hval << 4) + (hval << 7) + (hval << 8) + (hval << 24);\n    }\n    return hval >>> 0;\n}\n\n/**\n * Implement W3C contrasting color algorithm\n * http://www.w3.org/TR/AERT#color-contrast\n *\n * @param   {number}  r       Red\n * @param   {number}  g       Green\n * @param   {number}  b       Blue\n * @return  {string}          Either 'white' or 'black'\n *\n * Assumes r, g, b are in the set [0, 1]\n */\nfunction contrastingColor(r, g, b) {\n    var o = ((r * 255 * 299) +\n             (g * 255 * 587) +\n             (b * 255 * 114)) / 1000;\n    return (o > 125) ? 'black' : 'white';\n}\n\n/**\n * Converts an HSL color value to RGB. Conversion formula\n * adapted from http://en.wikipedia.org/wiki/HSL_color_space.\n * Assumes h, s, and l are contained in the set [0, 1] and\n * returns r, g, and b in the set [0, 1].\n *\n * @param   {number}  h       The hue\n * @param   {number}  s       The saturation\n * @param   {number}  l       The lightness\n * @return  {Array}           The RGB representation\n */\nfunction hslToRgb(h, s, l){\n    var r, g, b;\n\n    if(s == 0){\n        r = g = b = l; // achromatic\n    }else{\n        var hue2rgb = function hue2rgb(p, q, t){\n            if(t < 0) t += 1;\n            if(t > 1) t -= 1;\n            if(t < 1/6) return p + (q - p) * 6 * t;\n            if(t < 1/2) return q;\n            if(t < 2/3) return p + (q - p) * (2/3 - t) * 6;\n            return p;\n        }\n\n        var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n        var p = 2 * l - q;\n        r = hue2rgb(p, q, h + 1/3);\n        g = hue2rgb(p, q, h);\n        b = hue2rgb(p, q, h - 1/3);\n    }\n\n    return [r, g, b];\n}\n\nexport function generateTagStyle(tag) {\n    var hash = hashFnv32a(tag);\n    var hue = (hash >> 4) & 360;\n    var lightnessOffset = 75;\n    var lightness = lightnessOffset + (hash & 0xf);\n    var bgColor = `hsl(${hue}, 100%, ${lightness}%)`;\n    var brColor = `hsl(${hue}, 100%, ${lightness - 40}%)`;\n\n    var [r, g, b] = hslToRgb(hue, 1.0, lightness / 100);\n    var fgColor = contrastingColor(r, g, b)\n\n    return `background-color: ${bgColor}; color: ${fgColor}; border: 1px solid ${brColor}`\n}\n\n\nexport default {\n    cssLoadFile: cssLoadFile,\n    cssGetAttribute: cssGetAttribute,\n    get: get,\n    merge: merge,\n    iframe: iframe,\n    bytesToString: bytesToString,\n    uid: uid,\n    time: time,\n    request: request,\n    sanitize: sanitize,\n    textify: textify,\n    isEmpty: isEmpty,\n    deepeach: deepeach,\n    isJSON: isJSON,\n    clone: clone,\n    linkify: linkify,\n    appendScriptStyle: appendScriptStyle,\n    getQueryString: getQueryString,\n    setWindowTitle: setWindowTitle,\n    generateTagStyle: generateTagStyle\n};\n"]}